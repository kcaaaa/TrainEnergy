# 高铁站节能降耗管理系统需求分析文档

**版本号**：v1.2

**修订日期**：2025-12-24

## 1. 文档概述

### 1.1 文档目的
本文档详细描述高铁站节能降耗管理系统的需求规格，包括系统目标、功能模块、数据模型、界面架构和非功能需求等内容，为开发团队提供明确的开发依据。

### 1.2 文档范围
本需求分析文档涵盖高铁站节能降耗管理系统的全部功能和非功能需求，包括单站能耗分析、多站能耗对比、能耗报告生成等核心功能。

### 1.3 术语定义
- **能耗数据**：指高铁站各类设备和系统产生的能源消耗数据，包括电量、水量、燃气量等。
- **能耗分类**：指按照不同维度对能耗进行分类，如设备类型（照明、空调、暖通等）、区域分类（候车厅、站台、办公区等）。
- **能耗趋势**：指能耗数据随时间变化的规律和走向，包括日、周、月、年等时间维度的趋势分析。

## 2. 系统目标

### 2.1 核心目标
- 实时监控高铁站能耗情况，提供清晰的能耗数据展示
- 分析能耗趋势，帮助管理者识别能耗异常和优化机会
- 对比不同高铁站的能耗水平，发现节能潜力
- 生成详细的能耗报告，为节能决策提供数据支持
- 降低高铁站运营成本，实现可持续发展目标

### 2.2 业务目标
- 提高能源利用效率，降低单位面积能耗
- 优化设备运行策略，减少能源浪费
- 建立完善的能耗管理体系，提升管理水平
- 为高铁站节能改造提供数据依据

## 3. 用户角色与权限

### 3.1 全站管理员
- **职责**：负责管理所有高铁站的能耗系统，拥有最高权限
- **权限范围**：
  - 查看所有高铁站的能耗分析情况（多站对比、汇总分析）
  - 管理所有用户账号和权限分配
  - 配置系统全局参数和告警规则
  - 管理所有高铁站的设备与系统信息
  - 生成全站能耗报告和分析
  - 查看所有站点的能耗告警记录

### 3.2 单站管理员
- **职责**：负责管理单个高铁站的能耗系统
- **权限范围**：
  - 仅查看和管理所属高铁站的能耗数据
  - 配置本站的告警规则和阈值
  - 管理本站的设备与系统信息
  - 生成本站的能耗报告
  - 查看和处理本站的能耗告警
  - 管理本站的用户（设备维护人）

### 3.3 设备维护人
- **职责**：负责维护和管理特定高铁站的设备
- **权限范围**：
  - 仅查看所属高铁站的设备能耗数据
  - 管理本站内的设备信息（录入、编辑、维护记录）
  - 查看和处理与设备相关的能耗告警
  - 提交设备维护申请
  - 查看设备的能耗历史数据

### 3.4 权限管理原则
- **最小权限原则**：用户仅获得完成工作所需的最小权限
- **权限继承原则**：高级别角色自动继承低级别角色的权限
- **按站划分原则**：除全站管理员外，其他角色权限均按高铁站范围划分
- **功能权限分离**：管理权限与操作权限分离，确保系统安全

## 4. 功能模块

### 4.1 系统管理
#### 4.1.1 用户管理
- **功能描述**：管理系统所有用户账号，支持账号创建、编辑、删除、禁用等操作
- **操作权限**：仅全站管理员和单站管理员（可管理本站用户）可操作
- **用户信息字段**：用户名、密码、姓名、联系方式、所属角色、所属站点（单站管理员/设备维护人）

#### 4.1.2 权限管理
- **功能描述**：定义和管理系统角色权限，支持精细化权限控制
- **权限粒度**：
  - 功能模块权限（如是否可访问多站对比功能）
  - 数据范围权限（如可访问哪些站点的数据）
  - 操作权限（如是否可编辑、删除数据）
- **权限配置**：
  - 预设角色：全站管理员、单站管理员、设备维护人
  - 支持自定义角色和权限组合
  - 权限批量分配功能

#### 4.1.3 角色管理
- **功能描述**：管理系统角色，定义角色的权限和操作范围
- **预设角色**：
  - 全站管理员：拥有所有权限
  - 单站管理员：拥有单站管理权限
  - 设备维护人：拥有设备维护权限
- **角色操作**：角色创建、编辑、删除、权限分配

#### 4.1.4 系统设置
- **功能描述**：配置系统基础参数和运行环境
- **设置项**：
  - 数据采集频率设置
  - 告警通知方式配置
  - 系统语言和时区设置
  - 数据备份策略配置
  - 系统日志管理

### 4.2 数据采集
- **实时数据采集**：通过传感器和智能电表实时采集能耗数据
- **历史数据导入**：支持批量导入历史能耗数据
- **数据验证**：对采集的数据进行完整性和准确性验证

### 4.3 单站能耗分析

#### 4.3.1 实时监控
- 展示当前能耗总量和主要能耗指标
- 实时显示各分类能耗数据（照明、空调、暖通等）
- 异常能耗预警和告警功能

#### 4.3.2 趋势分析
- 支持日、周、月、年等时间维度的能耗趋势分析
- **按天查询时**：自动根据小时拆分能耗数据，提供24小时逐小时能耗分析
- **按周查询时**：按天拆分展示7天能耗数据，支持工作日/周末对比分析
- **按月查询时**：按天或按周拆分展示能耗数据，支持与历史月份对比
- 提供能耗对比功能（同比、环比）
- 支持自定义时间范围查询
- **小时级分析特性**：
  - 展示每小时能耗峰值与谷值，自动标记异常波动时段
  - 支持将小时数据与列车时刻表、运营场景关联分析
  - 提供小时级能耗预警功能，实时监测能耗异常
  - 支持导出小时级能耗明细数据

##### 1. 运营时段联动
- **列车密集到发时段**（如早晚高峰1小时内≥5列）：
  强制关联「站台扶梯/照明」「进出站通道通风」与列车时刻表，监测设备提前启动/延后关闭的冗余能耗（如提前启动超过20分钟即预警）。

- **夜间停运时段**（最后一列离站至次日首列到发）：
  设定「大型设备休眠基线」，要求：
  - 空调主机切换为「值班模式」（仅维持管道最小循环）
  - 除应急照明外，公共区域照明功率≤日常10%
  - 扶梯/安检设备全停（仅保留应急通道照明）

##### 2. 特殊工况联动
- **极端天气**：
  关联室外温湿度与空调主机能耗，如夏季室外温度＞38℃时，监测候车厅温度设定值是否≤26℃（避免过度制冷）；冬季室外温度＜-5℃时，监测热水系统加热频率是否异常（管道保温失效可能导致能耗激增）。

- **大型活动时段**（如站内临时展会）：
  单独统计临时启用的「额外照明」「临时空调分区」能耗，与常规时段对比分析合理性。

#### 4.3.3 分类分析

##### 1. 核心动力系统
- **空调与暖通系统**
  细化为「中央空调主机（冷水机组/锅炉）」「循环水泵」「冷却塔」「大面积区域风管风机」，需监测：
  - 主机运行负载率（如冷水机组COP值与能耗的关联）
  - 水泵/风机的变频运行状态（是否按负荷动态调节转速）
  - 不同区域（候车厅/站台）空调分区能耗（避免整体运行导致的区域浪费）

- **通风系统**
  针对「隧道通风机」「站厅公共区排风机」，重点监测：
  - 列车到发时段与通风机启停的联动能耗（如列车进站前15分钟启动，出站后10分钟关闭）
  - 非运营时段的值班通风能耗（是否按最小新风量运行）

##### 2. 大型机电设备
- **电梯与扶梯系统**
  聚焦「进站口/出站口自动扶梯（长距离）」「候车厅至站台垂直电梯（大容量）」，监测：
  - 高峰时段满载率与能耗的关系（避免低满载时长时间运行）
  - 平峰时段自动启停功能的生效状态（如3分钟无负载是否自动停运）

- **安检与票务大型设备**
  保留「安检X光机（通道式）」「自动售票机（批量）」「闸机系统（全站）」，监测：
  - X光机连续运行时长（非高峰时段是否按间隔启停）
  - 闸机系统待机功率（全站闸机汇总能耗占比）

##### 3. 公共区域大型系统
- **照明系统（公共区域）**
  限定「候车厅主照明（大面积）」「站台照明」「进出站通道照明」「停车场照明（大面积）」，监测：
  - 光照传感器联动状态（如白天自然光充足时是否自动调暗）
  - 不同区域照明的时段功率曲线（如夜间候车厅是否切换为应急照明模式）

- **给排水系统（集中式）**
  聚焦「消防水泵（主备）」「生活热水循环系统（锅炉/热泵）」，监测：
  - 消防水泵定期试机能耗（是否按规范频次运行）
  - 热水系统保温能耗（管道散热导致的加热频率异常）

- **新能源配套系统**
  仅保留「电动接驳车集中充电桩（≥10桩）」，监测：
  - 充电桩群的峰谷用电占比（引导非高峰时段充电降低成本）

#### 4.3.4 区域对比
- 对比高铁站不同区域的能耗水平
- 识别高能耗区域和节能潜力
- 展示区域能耗占比分布

### 4.4 多站能耗对比

#### 4.4.1 能耗绝对值比较
- 对比不同高铁站的能耗总量
- 按时间维度展示多站能耗变化
- 支持排序和筛选功能

#### 4.4.2 单位面积能耗比较
- 计算和对比各高铁站的单位面积能耗
- 识别单位面积能耗异常的高铁站
- 分析单位面积能耗的影响因素

#### 4.4.3 单位人流量能耗比较
- 计算和对比各高铁站的单位人流量能耗
- 考虑客流量因素的能耗效率分析
- 支持客流量数据的导入和关联分析

### 4.5 能耗占比分析
- **功能描述**：统计高铁站不同能源类型（电力、燃气、水等）的消耗占比，以及不同区域、不同设备类型的能耗占比；新增**系统级能耗占比分析**，按核心设备系统（空调通风、电梯扶梯、照明等）进行能耗占比统计，支持多级能耗拆解分析。
- **输入输出**：
  - 输入：选择时间范围、能源类型、统计维度（区域/设备类型/系统级）
  - 输出：饼图/环形图展示的能耗占比分析结果，支持多级数据下钻
- **交互流程**：
  1. 用户选择统计时间范围和维度
  2. 系统生成能耗占比分析图表
  3. 用户可点击图表区域查看详细数据，支持从系统级到设备级的能耗拆解
  4. 针对高占比能耗系统，自动标注节能潜力区域

#### 4.5.1 系统级能耗占比
- **功能描述**：按核心设备系统进行能耗占比分析，识别主要能耗系统
- **分析维度**：空调通风系统、电梯扶梯系统、安全票务系统、照明系统、给排水系统、新能源系统
- **展示形式**：环形图+表格组合展示，支持按时间周期（日/周/月/年）切换
- **节能提示**：自动标记占比超过20%的能耗系统，并提供节能建议

#### 4.5.2 多级能耗拆解
- **功能描述**：支持从全站→系统→区域→设备的多级能耗拆解分析
- **交互方式**：点击图表区域或使用导航树进行层级切换
- **数据精度**：支持精确到单台设备的能耗占比分析

### 4.6 能耗分析预警系统
#### 4.6.1 告警功能概述
- **功能描述**：针对各类设备或系统的能耗情况进行实时监测和预警，支持自定义告警阈值及波动范围，有效避免误报。
- **告警类型**：
  - 能耗异常波动告警（突增/突降）
  - 设备协同异常告警（多设备联动故障）
  - 系统负载异常告警（负载率异常）
  - 节能策略违规告警（未按设定模式运行）
  - 趋势异常告警（能耗趋势偏离正常范围）
  - 小时级能耗异常告警（实时监测）

#### 4.6.2 自定义告警阈值配置
- **阈值类型**：
  - **绝对值阈值**：设定能耗上限/下限绝对值（如单台空调能耗>100kWh/h时告警）
  - **相对值阈值**：设定能耗波动百分比（如与历史同期相比波动>±20%时告警）
  - **趋势阈值**：设定能耗趋势变化速率（如连续3小时能耗增长>10%/h时告警）
  - **负载阈值**：设定设备/系统负载率上限（如空调主机负载率>90%时告警）

- **自定义配置项**：
  - 按设备类型/系统类型分别设定告警阈值
  - 支持为不同时段（高峰/平峰/夜间）设定不同阈值
  - 可配置告警波动范围（如设定±5%的波动容忍区间，避免微小波动触发告警）
  - 可配置告警延迟时间（如异常持续3分钟以上才触发告警，减少误报）
  - 支持配置告警级别（紧急/重要/一般）

#### 4.6.3 告警流程与管理
- **告警触发流程**：
  1. 系统实时监测设备能耗和运行参数
  2. 根据配置的阈值和波动范围判断是否触发告警
  3. 触发告警时，根据告警级别选择通知方式
  4. 生成告警记录，包含详细信息

- **告警通知方式**：
  - 系统内实时通知（弹窗/消息中心）
  - 短信通知（重要/紧急告警）
  - 邮件通知（包含详细分析报告）
  - 移动端推送通知（可选）

- **告警信息包含**：
  - 告警ID、告警级别、触发时间
  - 设备ID/系统名称、所属站点
  - 异常类型、当前值、阈值范围
  - 历史对比数据、异常影响评估
  - 建议处理方式、节能优化建议

#### 4.6.4 误报避免机制
- **波动容忍区间**：为每个阈值配置合理的波动范围
- **时段差异化阈值**：根据不同运营时段调整阈值
- **历史数据学习**：系统自动学习设备正常能耗模式，动态调整告警策略
- **告警确认机制**：重要告警需人工确认，减少误报影响
- **告警统计分析**：定期分析告警历史，优化告警策略

### 4.7 节能策略模拟
- **功能描述**：基于历史能耗数据和设备特性，模拟不同节能策略的效果，为管理者提供决策支持。
- **模拟场景**：
  - 设备运行模式调整（如空调温度调高1℃）
  - 设备启停优化（如扶梯高峰时段启停控制）
  - 系统协同优化（如空调与通风系统联动控制）
  - 新能源替代方案（如增加光伏装机容量）

#### 4.7.1 节能策略模板
- **功能描述**：预置常见节能场景的策略模板，方便用户快速应用成熟的节能方案，提高工作效率。
- **预置模板类型**：
  - **高峰时段节能模板**：优化列车密集到发时段的设备运行策略
  - **夜间停运节能模板**：设置夜间设备休眠基线，降低非运营时段能耗
  - **极端天气节能模板**：针对高温/低温天气的空调系统优化策略
  - **大型活动节能模板**：临时活动期间的能耗管理方案
  - **节假日节能模板**：根据客流量变化调整设备运行模式

- **模板内容**：
  - 设备运行参数配置（如空调温度、照明亮度、设备启停时间）
  - 系统协同控制逻辑
  - 预期节能效果参考值
  - 适用场景说明

- **使用流程**：
  1. 用户从模板库选择合适的节能策略模板
  2. 系统自动加载模板参数
  3. 用户可根据实际情况微调参数
  4. 执行节能策略模拟
  5. 查看模拟结果并应用策略

- **模板管理功能**：
  - 支持自定义模板创建和保存
  - 支持模板的编辑、删除和分享
  - 记录模板使用效果，持续优化模板

- **模拟流程**：
  1. 用户选择节能策略和参数
  2. 系统基于历史数据进行模拟计算
  3. 输出模拟结果：预计节能量、投资成本、回收期
  4. 支持多方案对比分析

### 4.8 能耗报告生成
- 自动生成能耗分析报告（日报、周报、月报、年报）
- 支持自定义报告模板和内容
- 报告导出功能（PDF、Excel等格式）
- 报告分享和推送功能

### 4.9 节能建议
- 根据能耗分析结果提供节能建议
- 评估节能措施的潜在效益
- 跟踪节能措施的实施效果

### 4.10 设备与系统管理
#### 4.10.1 功能概述
- **功能描述**：统一管理高铁站所有能耗设备及系统类型，提供完整的设备生命周期管理功能，支持设备信息的录入、编辑、删除、查询和统计分析。

#### 4.10.2 能耗设备分类
- **核心动力系统**：
  - 中央空调主机（冷水机组/锅炉）
  - 循环水泵（冷冻水泵/冷却水泵）
  - 冷却塔
  - 区域风管风机
  - 制冷站设备

- **通风系统**：
  - 隧道通风机
  - 站厅公共区排风机
  - 新风机组
  - 排烟风机

- **电梯扶梯系统**：
  - 长距离自动扶梯（进站口/出站口）
  - 垂直电梯（候车厅至站台）
  - 无障碍电梯

- **安全票务系统**：
  - 安检X光机（通道式）
  - 自动售票机
  - 自动检票机（闸机）
  - 安全监控设备

- **照明系统**：
  - 候车厅主照明
  - 站台照明
  - 进出站通道照明
  - 停车场照明
  - 应急照明

- **给排水系统**：
  - 消防水泵
  - 生活热水循环系统（锅炉/热泵）
  - 供水加压泵
  - 污水处理设备

- **新能源系统**：
  - 电动接驳车集中充电桩群
  - 光伏发电系统
  - 储能设备

#### 4.10.3 系统类型分类
- **空调与暖通系统**
- **通风与排烟系统**
- **电梯与扶梯系统**
- **安全与票务系统**
- **照明与应急系统**
- **给排水与消防系统**
- **新能源与储能系统**
- **综合管理系统**

#### 4.10.4 统一管理功能
- **设备信息管理**：
  - 设备基本信息录入与编辑（名称、类型、型号、规格、额定功率等）
  - 设备所属系统与安装位置管理
  - 设备生命周期管理（安装时间、维护记录、报废时间等）
  - 设备状态管理（正常、维修、停用、报废等）

- **系统信息管理**：
  - 系统基本信息录入与编辑（名称、类型、包含设备等）
  - 系统层级关系管理（支持系统嵌套）
  - 系统能耗基准值设置

- **查询与统计**：
  - 支持按设备类型、系统类型、安装位置、状态等条件查询
  - 提供设备统计报表（设备数量、功率分布、能耗占比等）
  - 支持设备信息导出功能

- **数据关联**：
  - 设备与能耗数据自动关联
  - 设备与告警系统自动关联
  - 设备与节能策略自动关联

### 4.11 首页数据展示页（数据看板）

#### 4.11.1 功能概述
- **功能描述**：作为系统的首页入口，提供高铁站能耗数据的可视化概览，根据用户角色和权限自动展示单站或多站的数据看板，包含核心指标、趋势分析、告警信息等关键内容。
- **设计原则**：
  - 数据可视化优先，采用图表、仪表盘等直观展示方式
  - 信息层次清晰，突出核心指标和异常信息
  - 响应式设计，适配不同屏幕尺寸
  - 根据用户角色动态展示权限范围内的数据

#### 4.11.2 单站数据看板
- **核心指标区**：
  - 当前总能耗（实时数据）
  - 今日累计能耗（与昨日同期对比）
  - 单位面积能耗（kWh/㎡）
  - 节能率（与上月同期对比）
  - 异常告警数量（按级别分类显示）

- **区域能耗分析**：
  - 展示形式：环形图+表格组合
  - 内容：各区域（候车厅、站台、办公区等）能耗占比
  - 交互：点击区域可查看该区域详细能耗数据
  - 特点：自动标注高能耗区域，提供节能建议

- **设备能耗分析**：
  - 展示形式：柱状图（Top 10高能耗设备）
  - 内容：排名前十的高能耗设备及其能耗数值
  - 交互：支持按设备类型筛选，点击设备可查看详细信息
  - 特点：显示设备额定功率与实际能耗对比

- **时间段能耗分析**：
  - 展示形式：折线图（24小时逐小时能耗趋势）
  - 内容：今日24小时能耗变化趋势
  - 交互：支持切换日/周/月视图，显示历史同期对比
  - 特点：自动标记异常波动时段，关联运营场景

- **能耗告警记录**：
  - 展示形式：列表（实时更新）
  - 内容：最近10条告警记录，包含告警级别、设备名称、触发时间、异常类型
  - 交互：点击告警可查看详细信息和处理建议
  - 特点：按告警级别（紧急/重要/一般）用不同颜色标识

- **运营场景联动展示**：
  - 内容：当前主要运营场景（如列车高峰到发、夜间停运等）
  - 能耗基准：展示当前场景下的能耗基准值和实际值对比
  - 优化建议：根据当前场景提供实时节能优化建议

#### 4.11.3 多站数据看板
- **核心指标区**：
  - 监测站数量（已接入系统的高铁站总数）
  - 总能耗（所有站点累计能耗）
  - 平均单位面积能耗（各站点平均值）
  - 节能潜力总估值（基于对比分析）
  - 待处理告警总数（跨站点汇总）

- **站点能耗分析（日/周/月）**：
  - 展示形式：柱状图（按站点展示）
  - 内容：各站点今日/本周/本月能耗对比
  - 交互：支持切换时间维度，点击站点可进入单站数据看板
  - 特点：按能耗数值排序，自动标记能耗异常站点

- **人流量趋势**：
  - 展示形式：折线图（多站点人流量对比）
  - 内容：各站点今日/本周人流量变化趋势
  - 交互：支持切换时间维度，显示人流量与能耗的关联分析
  - 特点：显示人流量峰谷时段，关联能耗变化

- **单位面积能耗对比**：
  - 展示形式：雷达图或条形图
  - 内容：各站点单位面积能耗对比（kWh/㎡）
  - 交互：支持按区域、建筑规模筛选对比站点
  - 特点：显示行业基准值，突出表现优异或异常的站点

- **异常能耗告警列表**：
  - 展示形式：列表（跨站点汇总）
  - 内容：所有站点的未处理告警，包含站点名称、设备名称、告警级别、触发时间
  - 交互：支持按站点、告警级别筛选，点击告警可查看详细信息
  - 特点：按告警时间倒序排列，支持批量处理

- **能耗分布地图**：
  - 展示形式：地图可视化
  - 内容：各站点在地图上的位置及能耗情况（颜色深浅表示能耗高低）
  - 交互：点击地图上的站点标记可查看该站点核心指标
  - 特点：支持区域筛选，显示区域能耗汇总信息

#### 4.11.4 通用功能
- **数据刷新**：支持手动刷新和自动刷新（默认5分钟）
- **视图切换**：支持大屏/标准视图切换
- **数据导出**：支持将看板数据导出为Excel/PDF格式
- **个性化配置**：支持用户自定义看板布局和显示内容
- **权限控制**：根据用户角色自动显示权限范围内的数据
- **响应式设计**：适配桌面端、平板和移动端

## 5. 数据模型

### 5.1 高铁站基础信息
```
高铁站信息 {
  高铁站ID: String (主键)
  高铁站名称: String
  所属区域: String
  建筑面积: Number
  投入使用时间: Date
  位置坐标: String
}
```

### 5.2 能耗数据
```
能耗数据 {
  数据ID: String (主键)
  高铁站ID: String (外键)
  数据时间: DateTime
  能耗类型: String (电量/水量/燃气量等)
  能耗数值: Number
  单位: String
  设备ID: String (外键，必填，仅关联大型设备)
  区域ID: String (外键，必填)
  能耗分类ID: String (外键，补充“通风系统”“新能源充电桩群”等)
  采集方式: String (实时/历史)
  设备运行模式: String (正常/节能/值班/应急)  // 新增，针对大型设备
  系统负载率: Number (0-100%，如空调主机负载)  // 新增
  关联运营场景: String (如“列车高峰到发”“夜间停运”)  // 新增
}
```

### 5.3 设备信息
```
设备信息 {
  设备ID: String (主键)
  设备名称: String
  设备类型: String (中央空调主机/自动扶梯/安检X光机等，细化大型设备类型)
  所属系统: String (如“空调系统”“安防系统”，用于系统级能耗汇总)  // 新增
  安装位置: String
  额定功率: Number
  最大/最小运行功率: Number  // 新增，用于判断运行是否异常
  投入使用时间: Date
  高铁站ID: String (外键)
}
```

### 5.4 区域信息
```
区域信息 {
  区域ID: String (主键)
  区域名称: String
  区域类型: String (候车厅/站台/办公区等)
  面积: Number
  高铁站ID: String (外键)
}
```

### 5.5 能耗分类
```
能耗分类 {
  分类ID: String (主键)
  分类名称: String
  父分类ID: String (外键，可选)
  分类描述: String
}
```

### 5.6 告警数据
```
告警数据 {
  告警ID: String (主键)
  高铁站ID: String (外键)
  设备ID: String (外键，可选)
  系统ID: String (外键，可选)
  告警级别: String (紧急/重要/一般)
  告警类型: String (能耗异常波动/设备协同异常/系统负载异常等)
  触发时间: DateTime
  告警内容: String
  当前值: Number
  阈值范围: String
  状态: String (未处理/处理中/已处理/已忽略)
  处理人: String (外键，可选)
  处理时间: DateTime (可选)
  处理结果: String (可选)
  节能建议: String (可选)
}
```

### 5.7 用户配置
```
用户配置 {
  用户ID: String (主键)
  看板布局: String (JSON格式，存储用户自定义的看板布局)
  默认站点: String (外键，默认查看的高铁站ID)
  自动刷新频率: Number (分钟)
  告警通知方式: Array (系统内/短信/邮件/移动端推送)
  显示指标: Array (用户选择显示的核心指标)
}
```

### 5.8 人流量数据
```
人流量数据 {
  数据ID: String (主键)
  高铁站ID: String (外键)
  数据时间: DateTime
  进站人数: Number
  出站人数: Number
  候车人数: Number
  采集方式: String (闸机统计/视频分析)
}
```

## 6. 界面架构

### 6.1 主要页面
1. **登录页面**：用户身份认证
2. **首页数据展示页（数据看板）**：系统概览和核心指标展示，根据用户角色自动显示单站或多站看板
3. **单站能耗分析页面**：
   - 实时监控子页面
   - 趋势分析子页面
   - 分类分析子页面
   - 区域对比子页面
   - 设备能耗详情子页面
4. **多站能耗对比页面**：
   - 能耗绝对值对比子页面
   - 单位面积能耗对比子页面
   - 单位人流量能耗对比子页面
   - 站点排名分析子页面
5. **能耗分析预警页面**：告警列表、告警详情、告警配置
6. **设备与系统管理页面**：设备信息管理、系统信息管理、设备统计分析
7. **能耗报告页面**：报告生成、查看和导出
8. **系统管理页面**：用户管理、角色管理、权限管理、系统设置

### 6.2 界面交互流程
1. 用户登录系统 → 进入首页数据展示页（数据看板），系统根据用户角色自动显示单站或多站看板
2. 从数据看板可导航至单站能耗分析、多站能耗对比、能耗分析预警、设备与系统管理、能耗报告等功能页面
3. 在单站能耗分析页面可切换不同的分析维度（实时监控、趋势分析、分类分析、区域对比等）
4. 在多站能耗对比页面可选择对比的高铁站和对比维度（能耗绝对值、单位面积能耗、单位人流量能耗等）
5. 在能耗分析预警页面可查看告警列表、告警详情，并进行告警配置
6. 在设备与系统管理页面可管理设备和系统信息，查看设备统计分析
7. 在能耗报告页面可生成、查看和导出能耗报告
8. 系统管理页面仅对管理员用户可见，可进行用户管理、角色管理、权限管理和系统设置

## 7. 非功能需求

### 7.1 性能需求
- 页面加载时间不超过2秒
- 支持100+并发用户同时访问
- 实时数据更新频率不低于5分钟/次
- 历史数据查询响应时间不超过5秒
- 首页数据看板自动刷新频率可配置（默认5分钟）

### 7.2 安全性需求
- 符合等保三级安全标准
- 数据传输采用加密技术
- 支持用户身份认证和权限管理
- 基于角色的访问控制，确保数据安全
- 敏感数据脱敏显示

### 7.3 可用性需求
- 系统可用性不低于99.9%
- 支持7×24小时不间断运行
- 提供友好的错误提示和操作指引
- 支持数据备份和恢复
- 提供技术支持和维护服务

### 7.4 兼容性需求
- 支持主流浏览器（Chrome、Firefox、Safari、Edge）
- 支持桌面端、平板和移动端访问
- 响应式设计，适配不同屏幕尺寸
- 支持Excel、PDF等多种文件格式导出

### 7.5 异常处理机制
- **功能描述**：对系统运行过程中可能出现的各类异常情况进行处理和响应，确保系统稳定运行和数据准确性。

#### 7.5.1 设备故障处理
- **功能描述**：对核心大型设备的故障情况进行监测、告警和处理
- **故障类型**：
  - 设备离线告警（通信中断）
  - 能耗异常告警（突增/突降）
  - 设备运行参数异常（负载过高/过低）
  - 设备协同异常（多设备联动故障）
- **处理流程**：
  1. 系统实时监测设备状态和能耗数据
  2. 触发故障阈值时，生成故障告警
  3. 自动关联相关设备和系统，分析故障影响范围
  4. 提供故障处理建议和应急预案
  5. 记录故障处理过程和结果

#### 7.5.2 数据异常处理
- **功能描述**：对采集的能耗数据进行异常检测和处理
- **异常类型**：
  - 数据缺失（传感器故障）
  - 数据异常值（超出合理范围）
  - 数据重复采集
  - 数据格式错误
- **处理方式**：
  - 自动标记异常数据
  - 提供数据修复建议
  - 支持手动修正异常数据
  - 记录数据异常处理日志

#### 7.5.3 系统异常处理
- **功能描述**：对系统自身运行异常进行处理
- **异常类型**：
  - 系统性能异常（响应缓慢）
  - 服务中断
  - 数据库连接异常
  - 权限验证失败
- **处理方式**：
  - 自动恢复机制
  - 异常告警通知
  - 系统降级方案
  - 完整的异常日志记录

## 8. 需求确认清单

| 需求编号 | 需求描述 | 完成状态 | 确认人 | 确认日期 |
|---------|---------|---------|--------|---------|
| 1 | 完善能耗监测时间段（天、周、月），按天查询时根据小时拆分能耗分析情况 | ✅ 已完成 | | |
| 2 | 完善能耗分析预警，针对每类设备或系统可自定义告警阈值及波动范围，避免误报 | ✅ 已完成 | | |
| 3 | 明确全部能耗设备及系统类型，做好整体管理，单独建立管理功能统一管理及录入 | ✅ 已完成 | | |
| 4 | 划分人员权限，设计全站管理员、单站管理员、设备维护人三级权限体系 | ✅ 已完成 | | |
| 5 | 补充首页数据展示页（数据看板），包括单站和多站两种视图 | ✅ 已完成 | | |
| 6 | 支持小时级能耗分析，关联运营场景和列车时刻表 | ✅ 已完成 | | |
| 7 | 提供能耗占比分析，支持系统级到设备级的多级能耗拆解 | ✅ 已完成 | | |
| 8 | 实现能耗分析预警系统，包含自定义阈值和误报避免机制 | ✅ 已完成 | | |
| 9 | 建立设备与系统管理功能，统一管理所有能耗设备 | ✅ 已完成 | | |
| 10 | 更新数据模型，支持告警数据、用户配置和人流量数据 | ✅ 已完成 | | |
| 11 | 优化界面架构，确保与新增功能模块一致 | ✅ 已完成 | | |
| 12 | 符合等保三级安全标准，具备高并发处理能力 | ✅ 已完成 | | |

## 10. 附录

### 10.1 修订记录
| 版本 | 修订日期 | 修订内容 | 修订人 |
|------|----------|----------|--------|
| v1.0 | 2025-12-23 | 初稿完成 | 全流程产品技术负责人 |
| v1.1 | 2025-12-23 | 基于用户补充需求完善文档：<br>1. 完善4.3.2趋势分析模块，补充场景化能耗监测需求<br>2. 完善4.3.3分类分析模块，补充核心大型设备监控需求<br>3. 更新5.2能耗数据模型，添加场景和设备关联字段<br>4. 更新5.3设备信息模型，添加系统归属和运行参数字段<br>5. 新增4.5能耗占比分析模块，扩展系统级能耗分析<br>6. 新增4.6大型设备联动告警功能<br>7. 新增4.7节能策略模拟功能<br>8. 新增7.6异常处理机制，包含设备故障处理<br>9. 调整文档结构，优化功能模块顺序 | 全流程产品技术负责人 |