# 高铁站节能降耗管理系统 - 系统管理模块设计文档

**模块名称**：系统管理模块

**版本号**：v1.1

**修订日期**：2025-12-24

**编写人**：全流程产品技术负责人

## 1. 功能概述

### 1.1 功能描述
系统管理模块是高铁站节能降耗管理系统的核心基础模块，负责用户账号管理、权限分配、角色定义、菜单管理、系统概览展示和系统日志记录等功能，确保系统的安全稳定运行和精细化权限控制。

### 1.2 设计目标
- 实现用户账号的全生命周期管理
- 提供精细化的权限控制机制
- 支持灵活的角色定义和分配
- 实现系统菜单的可视化管理
- 提供系统运行状态和关键指标的实时监控
- 记录系统操作日志，支持查询和导出
- 确保系统的安全性和可维护性

### 1.3 适用范围
本模块适用于全站管理员和单站管理员角色，用于管理系统用户、权限、角色、菜单、查看系统状态和操作日志。

## 2. 输入输出

### 2.1 输入数据
| 输入项 | 数据类型 | 描述 | 来源 | 约束条件 |
|-------|---------|------|------|--------|
| 用户名 | 字符串 | 用户登录账号 | 用户输入 | 长度3-20字符，以字母开头，包含字母、数字和下划线，唯一 |
| 密码 | 字符串 | 用户登录密码 | 用户输入 | 长度6-20字符 |
| 昵称 | 字符串 | 用户昵称 | 用户输入 | 非空 |
| 邮箱 | 字符串 | 用户邮箱 | 用户输入 | 符合邮箱格式 |
| 手机号 | 字符串 | 用户联系电话 | 用户输入 | 11位手机号码格式 |
| 所属角色 | 字符串 | 用户分配的角色 | 下拉选择 | 必选，从角色列表中选择 |
| 权限项 | 字符串数组 | 角色拥有的权限 | 勾选选择 | 至少选择一项 |
| 角色标识 | 字符串 | 角色的唯一标识 | 用户输入 | 字母开头，包含字母、数字和下划线，唯一 |
| 角色名称 | 字符串 | 角色的名称 | 用户输入 | 长度2-20字符，唯一 |
| 角色描述 | 字符串 | 角色的描述信息 | 用户输入 | 长度0-100字符 |
| 菜单名称 | 字符串 | 菜单的名称 | 用户输入 | 长度2-20字符，唯一 |
| 菜单路径 | 字符串 | 菜单对应的路由路径 | 用户输入 | 符合路由格式 |
| 菜单图标 | 字符串 | 菜单的图标 | 选择器选择 | FontAwesome图标名 |
| 菜单排序 | 数字 | 菜单的显示顺序 | 用户输入 | 1-9999 |
| 菜单父ID | 字符串 | 父菜单的ID | 下拉选择 | 可选 |
| 日志类型 | 字符串 | 日志的类型 | 下拉选择 | 可选 |
| 日志时间范围 | 日期范围 | 日志的时间范围 | 日期选择器 | 可选 |
| 日志操作人 | 字符串 | 日志的操作人 | 输入框 | 可选 |

### 2.2 输出结果
| 输出项 | 数据类型 | 描述 | 展示方式 |
|-------|---------|------|---------|
| 系统概览 | 仪表板 | 系统运行状态和关键指标 | 图表和卡片组合展示 |
| 用户列表 | 表格 | 系统所有用户信息 | 分页表格展示 |
| 角色列表 | 表格 | 系统所有角色信息 | 分页表格展示 |
| 权限列表 | 树形结构 | 系统所有权限项 | 树形菜单展示 |
| 菜单列表 | 表格 | 系统所有菜单信息 | 分页表格展示 |
| 系统日志 | 表格 | 系统操作日志 | 分页表格展示 |
| 操作结果 | 提示信息 | 操作成功/失败反馈 | 弹窗提示 |
| 日志导出文件 | CSV | 导出的日志文件 | 文件下载 |

## 3. 功能逻辑

### 3.1 核心流程

#### 3.1.1 系统概览流程
1. 用户进入系统管理模块，选择系统概览功能
2. 系统加载系统运行状态数据和关键指标
3. 系统展示系统时间、资源使用情况、用户活动等信息
4. 系统实时更新图表数据
5. 用户查看系统状态信息

#### 3.1.2 用户管理流程
1. 用户进入系统管理模块，选择用户管理功能
2. 系统加载用户列表数据
3. 用户执行查询、新增、编辑、删除、禁用等操作
4. 系统验证操作权限和数据有效性
5. 系统执行相应操作并返回结果
6. 用户确认操作结果

#### 3.1.3 角色管理流程
1. 用户进入系统管理模块，选择角色管理功能
2. 系统加载角色列表数据
3. 用户执行查询、新增、编辑、删除等操作
4. 用户为角色分配或取消权限
5. 系统验证操作权限和数据有效性
6. 系统执行相应操作并返回结果
7. 用户确认操作结果

#### 3.1.4 菜单管理流程
1. 用户进入系统管理模块，选择菜单管理功能
2. 系统加载菜单列表数据
3. 用户执行查询、新增、编辑、删除、调整顺序等操作
4. 系统验证操作权限和数据有效性
5. 系统执行相应操作并返回结果
6. 用户确认操作结果

#### 3.1.5 系统日志流程
1. 用户进入系统管理模块，选择系统日志功能
2. 系统加载系统操作日志数据
3. 用户执行查询、筛选、导出等操作
4. 系统验证操作权限和数据有效性
5. 系统执行相应操作并返回结果
6. 用户确认操作结果

### 3.2 子功能说明

#### 3.2.1 系统概览
- **系统状态展示**：显示系统当前时间、在线用户数、模块访问量等信息
- **资源使用监控**：展示CPU、内存等系统资源使用情况
- **用户活动统计**：统计用户登录、操作等活动数据
- **数据可视化**：使用图表展示关键指标的趋势变化

#### 3.2.2 用户管理
- **用户查询**：支持按用户名、姓名、角色等条件进行模糊查询
- **用户新增**：创建新用户账号，设置基本信息和分配角色
- **用户编辑**：修改现有用户的基本信息和角色分配
- **用户删除**：删除不再使用的用户账号
- **用户禁用**：临时禁用用户账号，保留用户信息
- **用户状态切换**：启用或禁用用户账号

#### 3.2.3 角色管理
- **角色查询**：支持按角色名称进行模糊查询
- **角色新增**：创建新角色并设置角色名称和描述
- **角色编辑**：修改现有角色的名称和描述
- **角色删除**：删除不再使用的角色
- **角色权限配置**：为指定角色分配或取消权限，支持树形权限选择

#### 3.2.4 菜单管理
- **菜单查询**：支持按菜单名称进行模糊查询
- **菜单新增**：创建新菜单，设置菜单名称、路径、图标、排序等信息
- **菜单编辑**：修改现有菜单的基本信息
- **菜单删除**：删除不再使用的菜单
- **菜单排序**：调整菜单的显示顺序
- **菜单层级管理**：设置菜单的父子关系

#### 3.2.5 系统日志
- **日志查询**：支持按操作人、操作类型、时间范围等条件进行查询
- **日志筛选**：根据日志类型进行筛选
- **日志导出**：将日志数据导出为CSV文件
- **日志详情查看**：查看日志的详细信息
- **日志自动清理**：保留最近1000条日志，自动清理超出限制的日志

#### 3.2.6 模式与角色可见性（单站/多站）
- **模式入口**：右上角提供“单站分析 / 多站分析”切换；切换后刷新可见菜单与数据源。
- **角色与权限**：
  - **超级管理员**（演示账号：admin/123456）：可见并操作单站、全站、多站全部功能与菜单。
  - **全站管理员**（演示账号：Allsite/123456）：可见多站分析、全站配置；可进入单站模式查看任意站点，但不可修改系统级权限与菜单。
  - **单站管理员**（演示账号智能生成：如 station01/123456、station02/123456，绑定站点ID）：仅可见单站模式，且仅限所绑定站点的查询与操作，隐藏多站入口与全站配置。
- **可见性规则**：
  - 单站模式：仅展示单站组件、菜单和数据；隐藏多站聚合、全站排行、跨站对比入口。
  - 多站模式：展示跨站聚合、对比、排行等组件；隐藏单站专属组件与配置入口。
  - 权限拦截：无权限角色的模式入口置灰或不展示，并在接口/路由层双重校验。
- **状态管理**：模式选择写入会话存储，刷新保留；切换时重置筛选条件（站点、时间、分类）并清除非当前模式缓存。

### 3.3 业务规则
- **最小权限原则**：用户仅获得完成工作所需的最小权限
- **权限继承原则**：高级别角色自动继承低级别角色的权限
- **功能权限分离**：管理权限与操作权限分离，确保系统安全
- **密码安全规则**：密码长度不少于8位，包含字母和数字
- **用户名唯一性**：系统内用户名必须唯一
- **角色权限统一管理**：角色的权限在角色管理模块中统一配置
- **菜单层级限制**：菜单支持多层级嵌套，但不超过5级
- **菜单排序规则**：同一层级菜单按排序字段升序显示
- **日志保留期限**：系统日志默认保留最近1000条记录
- **操作记录完整性**：所有系统操作必须记录详细日志，包括操作人、操作时间、操作内容等
- **模式可见性规则**：单站管理员只能访问单站模式，隐藏多站入口；全站管理员与超级管理员可访问多站模式，单站模式默认可见。
- **数据范围限制**：单站管理员的接口请求必须携带并校验绑定站点ID，禁止跨站访问；全站/超级管理员可选择任意站点或多站聚合。

## 4. 数据流向

### 4.1 数据流程图
```
用户输入 → 系统验证 → 业务处理 → 数据存储 → 结果返回
```

### 4.2 数据存储
- **用户数据**：存储用户账号信息，包括用户名、密码、姓名、联系方式、所属角色等
- **角色数据**：存储角色信息，包括角色名称、描述等
- **权限数据**：存储权限项信息，包括权限名称、描述、层级关系等
- **角色权限关系**：存储角色与权限的关联关系
- **菜单数据**：存储系统菜单信息，包括菜单名称、路径、图标、排序、父子关系等
- **系统日志数据**：存储系统操作日志，包括操作人、操作时间、操作类型、操作内容等
- **系统概览数据**：存储系统运行状态数据，包括CPU使用率、内存使用率、用户活动等

### 4.3 数据关联
- 用户与角色：多对一关系，一个用户只能分配一个角色
- 角色与权限：多对多关系，一个角色可以拥有多个权限，一个权限可以分配给多个角色
- 菜单与菜单：父子关系，支持多层级嵌套
- 用户与日志：多对多关系，一个用户可以产生多条日志，一条日志对应一个用户

## 5. 功能交互

### 5.1 界面原型

#### 5.1.1 系统概览界面
- **顶部**：系统标题和当前时间
- **中部**：系统状态卡片，显示在线用户数、模块访问量等关键指标
- **底部**：数据可视化图表，展示CPU使用率、内存使用率、用户活动等趋势

#### 5.1.2 用户管理界面
- **顶部**：查询条件区域（用户名、姓名、角色）和操作按钮（新增用户）
- **中部**：用户列表表格（用户名、姓名、联系方式、角色、状态、操作）
- **底部**：分页控件
- **新增/编辑弹窗**：用户信息表单（用户名、密码、姓名、联系方式、角色）

#### 5.1.3 角色管理界面
- **顶部**：查询条件区域（角色名称）和操作按钮（新增角色）
- **中部**：角色列表表格（角色名称、描述、操作）
- **底部**：分页控件
- **新增/编辑弹窗**：角色信息表单（角色名称、描述）
- **权限配置弹窗**：权限树结构（可勾选）和操作按钮（保存权限）

#### 5.1.4 菜单管理界面
- **顶部**：查询条件区域（菜单名称）和操作按钮（新增菜单）
- **中部**：菜单列表表格（菜单名称、路径、图标、排序、父菜单、操作）
- **底部**：分页控件
- **新增/编辑弹窗**：菜单信息表单（菜单名称、路径、图标、排序、父菜单）

#### 5.1.5 系统日志界面
- **顶部**：查询条件区域（操作人、操作类型、时间范围）和操作按钮（导出日志）
- **中部**：日志列表表格（操作人、操作类型、操作内容、操作时间、操作IP）
- **底部**：分页控件
- **日志详情弹窗**：显示日志的详细信息

### 5.2 交互流程

#### 5.2.1 系统概览流程
1. 用户进入系统管理模块，选择系统概览功能
2. 系统加载系统状态数据和图表数据
3. 系统实时更新系统时间和图表数据
4. 用户查看系统状态信息

#### 5.2.2 新增用户流程
1. 用户点击"新增用户"按钮
2. 系统弹出新增用户表单
3. 用户填写用户信息并选择角色
4. 用户点击"保存"按钮
5. 系统验证表单数据有效性
6. 系统创建用户账号并返回结果
7. 系统提示操作成功并刷新用户列表

#### 5.2.3 配置角色权限流程
1. 用户在角色列表中点击"配置权限"按钮
2. 系统弹出权限配置弹窗，加载该角色当前拥有的权限
3. 用户勾选或取消勾选权限项
4. 用户点击"保存权限"按钮
5. 系统验证权限配置
6. 系统保存权限配置并返回结果
7. 系统提示操作成功

#### 5.2.4 新增菜单流程
1. 用户点击"新增菜单"按钮
2. 系统弹出新增菜单表单
3. 用户填写菜单信息并选择父菜单（可选）
4. 用户点击"保存"按钮
5. 系统验证表单数据有效性
6. 系统创建菜单并返回结果
7. 系统提示操作成功并刷新菜单列表

#### 5.2.5 日志查询与导出流程
1. 用户在系统日志界面输入查询条件
2. 用户点击"查询"按钮
3. 系统根据查询条件过滤日志数据
4. 用户查看筛选后的日志列表
5. 用户点击"导出日志"按钮
6. 系统生成日志CSV文件并提供下载

### 5.3 操作说明

#### 5.3.1 系统概览操作
- **查看系统状态**：进入系统概览界面查看系统运行状态和关键指标
- **查看图表数据**：查看CPU使用率、内存使用率、用户活动等趋势图表

#### 5.3.2 用户管理操作
- **查询**：在查询条件中输入关键字，点击"查询"按钮
- **新增**：点击"新增用户"按钮，填写表单信息，点击"保存"按钮
- **编辑**：在用户列表中点击"编辑"按钮，修改表单信息，点击"保存"按钮
- **删除**：在用户列表中点击"删除"按钮，确认删除后系统执行删除操作
- **状态切换**：在用户列表中点击"启用"/"禁用"按钮，系统切换用户状态

#### 5.3.3 角色管理操作
- **查询**：在查询条件中输入角色名称，点击"查询"按钮
- **新增**：点击"新增角色"按钮，填写表单信息，点击"保存"按钮
- **编辑**：在角色列表中点击"编辑"按钮，修改表单信息，点击"保存"按钮
- **删除**：在角色列表中点击"删除"按钮，确认删除后系统执行删除操作
- **配置权限**：在角色列表中点击"配置权限"按钮，在权限配置弹窗中勾选权限项，点击"保存权限"按钮

#### 5.3.4 菜单管理操作
- **查询**：在查询条件中输入菜单名称，点击"查询"按钮
- **新增**：点击"新增菜单"按钮，填写表单信息，点击"保存"按钮
- **编辑**：在菜单列表中点击"编辑"按钮，修改表单信息，点击"保存"按钮
- **删除**：在菜单列表中点击"删除"按钮，确认删除后系统执行删除操作

#### 5.3.5 系统日志操作
- **查询**：在查询条件中输入操作人、选择操作类型和时间范围，点击"查询"按钮
- **查看详情**：在日志列表中点击"详情"按钮，查看日志的详细信息
- **导出**：点击"导出日志"按钮，系统导出日志为CSV文件
- **筛选**：使用操作类型下拉框筛选特定类型的日志

## 6. 功能字段

### 6.1 核心字段定义

#### 6.1.1 用户表
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| id | 字符串 | 32 | 主键，唯一 | 用户ID |
| username | 字符串 | 20 | 唯一，非空 | 用户名 |
| password | 字符串 | 128 | 非空 | 密码 |
| nickname | 字符串 | 20 | 非空 | 昵称 |
| email | 字符串 | 50 | 邮箱格式 | 邮箱 |
| phone | 字符串 | 11 | 手机号格式 | 手机号 |
| roleId | 字符串 | 32 | 非空 | 角色ID |
| status | 布尔值 | - | 非空，默认true | 状态（true：启用，false：禁用） |
| createTime | 日期时间 | - | 非空 | 创建时间 |
| updateTime | 日期时间 | - | 非空 | 更新时间 |

#### 6.1.2 角色表
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| id | 字符串 | 32 | 主键，唯一 | 角色ID |
| roleKey | 字符串 | 20 | 唯一，非空 | 角色标识（字母开头，包含字母、数字和下划线） |
| roleName | 字符串 | 20 | 唯一，非空 | 角色名称 |
| description | 字符串 | 100 | 可空 | 角色描述 |
| status | 布尔值 | - | 非空，默认true | 状态（true：启用，false：禁用） |
| createTime | 日期时间 | - | 非空 | 创建时间 |
| updateTime | 日期时间 | - | 非空 | 更新时间 |

#### 6.1.3 权限表
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| id | 字符串 | 32 | 主键，唯一 | 权限ID |
| permissionName | 字符串 | 50 | 非空 | 权限名称 |
| description | 字符串 | 100 | 可空 | 权限描述 |
| parentId | 字符串 | 32 | 可空 | 父权限ID |
| level | 数字 | 1 | 非空，默认1 | 权限层级 |
| sort | 数字 | 3 | 非空，默认0 | 排序字段 |

#### 6.1.4 角色权限关系表
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| id | 字符串 | 32 | 主键，唯一 | 角色权限关系ID |
| roleId | 字符串 | 32 | 非空 | 角色ID |
| permissionId | 字符串 | 32 | 非空 | 权限ID |

#### 6.1.5 菜单表
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| id | 字符串 | 32 | 主键，唯一 | 菜单ID |
| menuName | 字符串 | 20 | 唯一，非空 | 菜单名称 |
| menuPath | 字符串 | 100 | 非空 | 菜单路径 |
| icon | 字符串 | 50 | 可空 | 菜单图标（FontAwesome图标类名） |
| sort | 数字 | 4 | 非空，默认0 | 排序字段 |
| parentId | 字符串 | 32 | 非空，默认0 | 父菜单ID（0表示顶级菜单） |
| status | 布尔值 | - | 非空，默认true | 状态（true：启用，false：禁用） |

#### 6.1.6 系统日志表
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| id | 字符串 | 32 | 主键，唯一 | 日志ID |
| type | 字符串 | 20 | 非空 | 日志类型（system：系统日志，operation：操作日志，error：错误日志，login：登录日志） |
| title | 字符串 | 50 | 非空 | 日志标题 |
| content | 字符串 | 500 | 非空 | 日志内容 |
| operator | 字符串 | 20 | 非空 | 操作人 |
| ip | 字符串 | 15 | 非空 | 操作IP |
| userAgent | 字符串 | 255 | 可空 | 用户代理信息 |
| createTime | 日期时间 | - | 非空 | 创建时间 |

### 6.2 扩展字段
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| last_login_time | 日期时间 | - | 可空 | 最后登录时间 |
| last_login_ip | 字符串 | 15 | 可空 | 最后登录IP |
| login_count | 数字 | 10 | 非空，默认0 | 登录次数 |
| data_format | 字符串 | 10 | 可空 | 数据展示格式 |
| theme | 字符串 | 10 | 可空 | 系统主题 |

## 7. 异常情况处理

### 7.1 异常类型
- **权限不足**：用户尝试执行没有权限的操作
- **数据验证失败**：用户输入的数据不符合规则
- **用户名重复**：新增或修改用户时，用户名已存在
- **角色正在使用**：删除角色时，该角色仍被用户使用
- **系统错误**：系统内部发生异常

### 7.2 异常处理机制
- **权限不足**：系统提示"您没有执行此操作的权限"，并返回上一级页面
- **数据验证失败**：系统在表单字段旁显示错误提示信息，说明具体的错误原因
- **用户名重复**：系统提示"用户名已存在，请重新输入"，并将焦点定位到用户名输入框
- **角色正在使用**：系统提示"该角色正在被用户使用，无法删除"，并禁用删除按钮
- **系统错误**：系统提示"系统内部发生错误，请稍后重试"，并记录详细错误日志

### 7.3 容错设计
- **表单验证**：在客户端和服务端都进行表单验证，确保数据有效性
- **事务处理**：对涉及多表操作的业务逻辑使用事务处理，确保数据一致性
- **日志记录**：记录系统操作日志和错误日志，便于问题追踪和排查
- **权限拦截**：在系统层面拦截没有权限的操作，确保系统安全

## 8. 性能要求

### 8.1 响应时间
- 用户列表查询响应时间：≤1秒
- 角色列表查询响应时间：≤1秒
- 权限树加载响应时间：≤1秒
- 表单提交响应时间：≤2秒

### 8.2 资源占用
- 内存占用：≤100MB
- CPU占用：≤10%
- 并发用户数：支持100个并发用户

## 9. 安全要求

### 9.1 权限控制
- **操作权限控制**：对系统管理模块的所有操作进行权限验证
- **数据范围控制**：单站管理员只能管理本站的用户和数据
- **敏感操作日志**：记录所有敏感操作（如用户删除、权限修改）的详细日志

### 9.2 数据安全
- **密码加密**：用户密码使用加盐哈希算法加密存储
- **数据传输加密**：使用HTTPS协议进行数据传输
- **数据备份**：定期备份用户、角色、权限等核心数据
- **SQL注入防护**：对所有用户输入进行SQL注入防护

## 10. 测试要点

### 10.1 功能测试

#### 10.1.1 系统概览
- 验证系统时间实时更新功能
- 验证CPU、内存、磁盘使用率等资源监控数据展示
- 验证用户活动统计图表数据准确性
- 验证系统状态卡片信息完整性
- 验证图表数据自动刷新功能

#### 10.1.2 用户管理
- 测试用户新增功能：验证表单验证规则、数据保存及返回结果
- 测试用户编辑功能：验证数据修改、保存及列表刷新
- 测试用户删除功能：验证删除确认、数据删除及列表更新
- 测试用户禁用/启用功能：验证状态切换及权限控制
- 测试用户查询功能：验证按用户名、昵称、角色等条件筛选
- 测试用户分页功能：验证分页控件及数据加载

#### 10.1.3 角色管理
- 测试角色新增功能：验证表单验证规则、角色保存及返回结果
- 测试角色编辑功能：验证角色信息修改、保存及列表刷新
- 测试角色删除功能：验证删除确认、角色删除及列表更新
- 测试角色权限配置功能：验证权限树展示、权限分配及保存
- 测试角色查询功能：验证按角色名称模糊搜索
- 测试角色分页功能：验证分页控件及数据加载

#### 10.1.4 菜单管理
- 测试菜单新增功能：验证表单验证规则、菜单保存及返回结果
- 测试菜单编辑功能：验证菜单信息修改、保存及列表刷新
- 测试菜单删除功能：验证删除确认、菜单删除及列表更新
- 测试菜单排序功能：验证排序调整及列表显示顺序
- 测试菜单父级设置功能：验证父子菜单关系及层级显示
- 测试菜单查询功能：验证按菜单名称模糊搜索
- 测试菜单分页功能：验证分页控件及数据加载

#### 10.1.5 系统日志
- 测试日志查询功能：验证按操作人、操作类型、时间范围筛选
- 测试日志详情查看功能：验证日志详细信息展示
- 测试日志导出功能：验证CSV文件导出及格式正确性
- 测试日志自动清理功能：验证超出1000条时自动清理
- 测试日志筛选功能：验证按日志类型下拉筛选
- 测试日志分页功能：验证分页控件及数据加载

#### 10.1.6 模式切换与角色可见性
- 超级管理员（admin/123456）：可见并切换单站/多站；验证切换后菜单、组件、数据源刷新。
- 全站管理员（Allsite/123456）：可见多站与单站；验证多站配置可用，系统级权限管理入口不可见。
- 单站管理员（station01/123456 等）：仅能看到单站入口与所绑定站点数据；多站入口置灰或隐藏；接口返回需校验站点ID。
- 刷新保持：切换后刷新页面，应保留最近模式选择且筛选条件被重置。

### 10.2 性能测试
- **并发测试**：测试100个并发用户同时访问系统管理模块
- **响应时间测试**：测试各功能的响应时间是否符合要求（≤1秒）
- **负载测试**：测试系统在高负载下的稳定性
- **数据量测试**：测试系统在大量用户、角色、菜单数据下的性能

### 10.3 兼容性测试
- **浏览器兼容性**：测试在Chrome 90+、Firefox 88+、Safari 14+、Edge 90+等主流浏览器中的表现
- **操作系统兼容性**：测试在Windows 10+、MacOS 10.15+等操作系统中的表现
- **屏幕分辨率兼容性**：测试在1366×768、1920×1080等不同分辨率下的表现

### 10.4 安全测试
- **权限验证测试**：测试不同角色的权限控制效果
- **表单注入测试**：测试表单输入的安全性
- **敏感信息测试**：验证密码等敏感信息的加密存储
- **操作日志完整性**：验证所有操作是否都有日志记录

## 11. 依赖关系

### 11.1 内部依赖
- **用户认证模块**：验证用户身份和权限
- **日志模块**：记录系统操作日志

### 11.2 外部依赖
- **加密算法库**：用于密码加密存储
- **时间处理库**：用于处理日期时间数据

## 12. 变更记录

| 版本号 | 变更日期 | 变更内容 | 变更人 |
|-------|---------|---------|--------|
| v1.0 | 2025-12-23 | 初始版本，完成系统管理模块设计 | 全流程产品技术负责人 |
| v1.1 | 2025-12-24 | 1. 更新所有表字段名称为驼峰命名规范<br>2. 完善系统概览功能的详细描述<br>3. 增强用户管理功能的表单验证规则<br>4. 优化角色管理功能的权限配置流程<br>5. 完善菜单管理功能的层级管理机制<br>6. 丰富系统日志功能的字段定义和查询条件<br>7. 扩展测试要点，细化各子模块的测试用例<br>8. 更新兼容性测试的浏览器和操作系统版本要求<br>9. 补充安全测试的具体内容 | 全流程产品技术负责人 |
| v1.2 | 2025-12-24 | 1. 新增登录页（/login）与路由守卫，未登录访问业务页将重定向登录<br>2. 顶部个人中心支持查看/修改昵称、邮箱、手机号，校验原密码后可修改新密码<br>3. 新增退出登录功能，清理本地会话并跳转登录<br>4. 补充认证与个人中心的功能描述、字段定义与测试要点 | 全流程产品技术负责人 |
| v1.3 | 2025-12-24 | 1. 新增单站/多站模式切换与角色可见性规则<br>2. 预置演示账号：admin/123456、Allsite/123456、station01/123456 等单站账号<br>3. 补充模式切换的状态管理与权限拦截说明<br>4. 增加模式切换与角色可见性的测试用例 | 全流程产品技术负责人 |

#### 3.2.7 认证与个人中心
- **登录**：提供 /login 页面，输入用户名与密码，验证通过后下发会话 token（当前前端存储在本地，后续接入后端接口）。
- **路由守卫**：未登录访问任何业务路由时重定向至 /login，已登录访问 /login 时重定向首页。
- **个人中心**：顶部个人中心入口，展示当前用户信息；支持修改昵称、邮箱、手机号，校验原密码后修改新密码。
- **退出登录**：清理本地 token / 用户信息，跳转登录页。

## 6.1.7 会话与用户扩展字段
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| token | 字符串 | 128 | 非空 | 登录会话令牌（前端存储，后续改为后端签发） |
| currentUser | 对象 | - | 非空 | 当前登录用户基本信息（id、username、nickname、roleId、email、phone） |

#### 10.1.7 认证与个人中心测试
- **登录成功**：正确账号密码登录成功，写入 token 与 currentUser，并跳转首页。
- **登录失败**：错误账号/密码或禁用用户，提示失败且不进入业务页。
- **守卫拦截**：未登录访问任意业务路由被重定向到 /login；已登录访问 /login 自动回首页。
- **个人信息修改**：昵称/邮箱/手机号修改后持久化并刷新显示。
- **修改密码**：必须先输入原密码且验证一致，修改后新密码生效；确认密码不一致应拦截。
- **退出登录**：清理 token 与用户信息，跳转 /login，刷新后仍需重新登录。 