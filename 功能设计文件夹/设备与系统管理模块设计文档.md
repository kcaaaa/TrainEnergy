# 高铁站节能降耗管理系统 - 设备与系统管理模块设计文档

## 1. 功能概述
设备与系统管理模块是高铁站节能降耗管理系统的核心模块之一，负责统一管理高铁站所有能耗设备及系统类型，提供完整的设备生命周期管理功能，支持设备信息的录入、编辑、删除、查询和统计分析。

### 1.1 主要功能
- 设备信息管理
- 系统信息管理
- 设备统计分析

### 1.2 功能目标
实现高铁站能耗设备的全生命周期管理，提供设备与系统的统一视图，为能耗分析和节能策略制定提供基础数据支持。

## 2. 输入/输出

### 2.1 输入
- 设备基本信息（设备名称、型号、制造商、安装位置等）
- 设备分类信息
- 系统类型信息
- 设备状态信息
- 查询条件（设备名称、分类、状态等）

### 2.2 输出
- 设备列表
- 设备详情信息
- 系统分类信息
- 设备统计分析报表
- 操作成功/失败提示

## 3. 功能逻辑

### 3.1 设备信息管理
1. **设备录入**：
   - 用户填写设备基本信息表单
   - 系统验证输入数据的完整性和合法性
   - 验证通过后，将设备信息保存到数据库
   - 返回操作成功提示

2. **设备编辑**：
   - 用户选择需要编辑的设备
   - 系统加载设备当前信息到编辑表单
   - 用户修改设备信息
   - 系统验证修改后的数据
   - 验证通过后，更新设备信息
   - 返回操作成功提示

3. **设备删除**：
   - 用户选择需要删除的设备
   - 系统弹出二次确认对话框
   - 用户确认删除操作
   - 系统检查设备是否存在关联数据
   - 如无关联数据，执行删除操作
   - 返回操作成功提示

4. **设备查询**：
   - 用户输入查询条件（设备名称、分类、状态等）
   - 系统根据查询条件筛选设备列表
   - 显示符合条件的设备信息

### 3.2 系统信息管理
1. **系统类型维护**：
   - 系统管理员可以新增、编辑、删除系统类型
   - 系统类型包括核心动力系统、环境控制系统等

2. **设备分类管理**：
   - 系统管理员可以维护设备分类体系
   - 支持多级分类管理

### 3.3 设备统计分析
1. **设备数量统计**：
   - 按系统类型统计设备数量
   - 按设备状态统计设备数量
   - 按安装区域统计设备数量

2. **设备能耗统计**：
   - 统计各系统类型的能耗占比
   - 统计各设备的能耗排名

## 4. 数据流向

### 4.1 设备信息管理数据流向
1. 用户输入设备信息 → 前端表单验证 → 发送到后端API → 后端数据验证 → 保存到数据库 → 返回操作结果 → 前端显示结果

2. 用户输入查询条件 → 前端发送查询请求 → 后端API处理 → 数据库查询 → 返回查询结果 → 前端展示设备列表

### 4.2 设备统计分析数据流向
1. 用户请求统计分析 → 前端发送请求 → 后端API处理 → 数据库查询统计 → 生成统计结果 → 前端展示统计图表

## 5. 功能点击交互

### 5.1 设备信息管理页面
1. **页面布局**：
   - 顶部：页面标题、搜索框、新增设备按钮
   - 中部：设备列表（表格形式）
   - 底部：分页控件

2. **交互流程**：
   - 点击"新增设备"按钮 → 弹出设备录入表单
   - 点击设备列表中的"编辑"按钮 → 弹出设备编辑表单
   - 点击设备列表中的"删除"按钮 → 弹出删除确认对话框
   - 点击设备列表中的"查看详情"按钮 → 弹出设备详情对话框
   - 在搜索框输入关键词 → 点击搜索按钮 → 筛选设备列表

### 5.2 设备统计分析页面
1. **页面布局**：
   - 顶部：页面标题、统计维度选择器
   - 中部：统计图表（柱状图、饼图等）
   - 底部：统计数据表格

2. **交互流程**：
   - 选择统计维度 → 系统更新统计图表和数据
   - 点击图表中的数据点 → 显示详细信息

## 6. 功能字段

### 6.1 设备信息表
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| device_id | 字符串 | 32 | 主键，唯一 | 设备ID |
| device_name | 字符串 | 100 | 非空 | 设备名称 |
| device_model | 字符串 | 50 | 非空 | 设备型号 |
| manufacturer | 字符串 | 50 | 非空 | 制造商 |
| install_date | 日期 | - | 非空 | 安装日期 |
| install_location | 字符串 | 100 | 非空 | 安装位置 |
| system_type | 字符串 | 50 | 非空 | 所属系统类型 |
| device_category | 字符串 | 50 | 非空 | 设备分类 |
| rated_power | 数值 | - | 非空 | 额定功率(kW) |
| status | 枚举 | - | 非空 | 设备状态(运行、停机、维护) |
| last_maintenance_date | 日期 | - | 可空 | 上次维护日期 |
| next_maintenance_date | 日期 | - | 可空 | 下次维护日期 |
| remark | 文本 | - | 可空 | 备注信息 |
| create_time | 日期时间 | - | 非空 | 创建时间 |
| update_time | 日期时间 | - | 非空 | 更新时间 |

### 6.2 系统类型表
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| system_id | 字符串 | 32 | 主键，唯一 | 系统ID |
| system_name | 字符串 | 50 | 非空，唯一 | 系统名称 |
| description | 文本 | - | 可空 | 系统描述 |
| create_time | 日期时间 | - | 非空 | 创建时间 |
| update_time | 日期时间 | - | 非空 | 更新时间 |

### 6.3 设备分类表
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| category_id | 字符串 | 32 | 主键，唯一 | 分类ID |
| category_name | 字符串 | 50 | 非空，唯一 | 分类名称 |
| parent_category_id | 字符串 | 32 | 可空 | 父分类ID |
| system_id | 字符串 | 32 | 非空 | 所属系统ID |
| description | 文本 | - | 可空 | 分类描述 |
| create_time | 日期时间 | - | 非空 | 创建时间 |
| update_time | 日期时间 | - | 非空 | 更新时间 |

## 7. 异常情况及处理

### 7.1 数据验证异常
- **场景**：用户输入的设备信息不完整或不符合格式要求
- **处理**：
  - 系统显示具体的错误提示信息（如"设备名称不能为空"、"额定功率必须为数值"等）
  - 标记错误的输入字段
  - 阻止表单提交，直到所有错误修正

### 7.2 数据库操作异常
- **场景**：设备信息保存、更新或删除时发生数据库错误
- **处理**：
  - 系统显示通用错误提示（如"操作失败，请稍后重试"）
  - 记录详细的错误日志
  - 提供重试按钮（可选）

### 7.3 权限异常
- **场景**：用户尝试执行没有权限的操作（如普通用户尝试删除设备）
- **处理**：
  - 系统显示权限不足提示
  - 隐藏或禁用无权限的操作按钮

### 7.4 设备关联数据异常
- **场景**：用户尝试删除存在关联数据的设备（如设备已有能耗数据记录）
- **处理**：
  - 系统显示删除失败提示，并说明原因
  - 提供查看关联数据的选项

## 8. 性能要求

### 8.1 响应时间
- 设备列表加载时间：≤2秒
- 设备详情加载时间：≤1秒
- 统计分析结果生成时间：≤3秒

### 8.2 并发处理
- 支持≥50个并发用户同时访问设备管理功能
- 支持≥10个并发用户同时进行设备统计分析

### 8.3 数据容量
- 支持管理≥10,000台设备信息
- 支持存储≥5年的设备维护记录

## 9. 安全要求

### 9.1 访问控制
- 基于角色的访问控制（RBAC）
- 设备管理功能仅对具有相应权限的用户开放
- 敏感操作（如设备删除）需要二次确认

### 9.2 数据保护
- 设备信息传输采用加密方式
- 设备数据定期备份
- 严格的数据库访问权限控制

### 9.3 审计日志
- 记录所有设备管理操作（新增、编辑、删除）
- 记录操作人、操作时间、操作内容

## 10. 测试点

### 10.1 功能测试
- 设备录入功能测试
- 设备编辑功能测试
- 设备删除功能测试
- 设备查询功能测试
- 系统类型管理测试
- 设备分类管理测试
- 设备统计分析测试

### 10.2 异常测试
- 无效数据输入测试
- 权限不足测试
- 数据库异常测试
- 并发操作测试

### 10.3 性能测试
- 设备列表加载性能测试
- 设备统计分析性能测试
- 并发用户访问测试

## 11. 依赖关系

### 11.1 内部依赖
- 系统管理模块（用户权限控制）
- 数据采集模块（设备状态数据）

### 11.2 外部依赖
- 数据库系统
- 图表库（用于统计分析展示）

## 12. 变更记录

| 版本 | 变更日期 | 变更内容 | 变更人 | 审核人 |
|------|---------|---------|-------|-------|
| V1.0 | 2025-12-23 | 设备与系统管理模块设计文档初稿 | 系统设计师 | |
