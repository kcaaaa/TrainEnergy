# 高铁站节能降耗管理系统 - 首页数据展示模块设计文档

**模块名称**：首页数据展示

**版本号**：v1.0

**修订日期**：2025-12-23

**编写人**：全流程产品技术负责人

## 1. 功能概述

### 1.1 功能描述
本模块作为系统的首页入口，提供高铁站能耗数据的可视化概览，根据用户角色和权限自动展示单站或多站的数据看板，包含核心指标、趋势分析、告警信息等关键内容，为用户提供直观的数据洞察和决策支持。

### 1.2 设计目标
- 提供直观、高效的数据可视化概览
- 根据用户角色和权限智能展示数据
- 突出核心指标和异常信息
- 支持响应式设计，适配不同设备
- 提供丰富的交互功能，支持数据下钻分析

### 1.3 适用范围
适用于所有系统用户，包括高铁站能耗运营人员、业务人员和相关管理者，根据用户角色自动展示单站或多站的数据看板。

## 2. 输入输出

### 2.1 输入数据
| 输入项 | 数据类型 | 描述 | 来源 | 约束条件 |
|-------|---------|------|------|--------|
| 用户角色信息 | 枚举型 | 用户的角色和权限 | 系统管理模块 | 必须为有效角色 |
| 能耗实时数据 | 数值型 | 各类能耗实时采集数据 | 数据采集模块 | 必须为非负数值 |
| 能耗历史数据 | 数值型 | 历史能耗记录数据 | 数据存储 | 必须为非负数值 |
| 告警信息 | 文本/数值型 | 能耗异常告警数据 | 能耗分析预警模块 | 必须为有效告警 |
| 设备信息 | 文本型 | 设备基础信息 | 设备与系统管理模块 | 必须为有效设备 |
| 区域信息 | 文本型 | 高铁站区域划分信息 | 设备与系统管理模块 | 必须为有效区域 |

### 2.2 输出结果
| 输出项 | 数据类型 | 描述 | 展示方式 |
|-------|---------|------|---------|
| 核心指标数据 | 数值型 | 关键能耗指标 | 数字卡片、仪表盘 |
| 区域能耗分析 | 图表型 | 各区域能耗占比 | 环形图+表格组合 |
| 设备能耗分析 | 图表型 | 高能耗设备排名 | 柱状图 |
| 时间段能耗分析 | 图表型 | 能耗变化趋势 | 折线图 |
| 能耗告警记录 | 列表型 | 最近告警信息 | 列表、颜色标识 |
| 站点能耗对比 | 图表型 | 多站点能耗比较 | 柱状图、雷达图 |
| 能耗分布地图 | 地图型 | 站点位置及能耗情况 | 地图可视化 |

## 3. 功能逻辑

### 3.1 核心流程
1. 用户登录系统 → 首页数据展示模块
2. 系统根据用户角色和权限判断显示单站或多站看板
3. 系统从各数据源获取实时数据和历史数据
4. 数据经过处理后，以图表、数字卡片等形式展示
5. 用户可与看板进行交互（如点击查看详情、切换视图等）
6. 系统定期自动刷新数据（默认5分钟）

### 3.2 子功能说明

#### 3.2.1 单站数据看板
- **核心指标区**：展示当前总能耗、今日累计能耗、单位面积能耗、节能率、异常告警数量等关键指标
- **区域能耗分析**：以环形图+表格组合展示各区域能耗占比，自动标注高能耗区域
- **设备能耗分析**：以柱状图展示Top 10高能耗设备，支持按设备类型筛选
- **时间段能耗分析**：以折线图展示24小时能耗趋势，支持切换日/周/月视图
- **能耗告警记录**：以列表展示最近10条告警记录，按级别分类显示
- **运营场景联动展示**：展示当前运营场景及其能耗基准值和实际值对比

#### 3.2.2 多站数据看板
- **核心指标区**：展示监测站数量、总能耗、平均单位面积能耗、节能潜力总估值、待处理告警总数等
- **站点能耗分析**：以柱状图展示各站点今日/本周/本月能耗对比
- **人流量趋势**：以折线图展示多站点人流量变化趋势，关联能耗分析
- **单位面积能耗对比**：以雷达图或条形图展示各站点单位面积能耗对比
- **异常能耗告警列表**：以列表展示所有站点的未处理告警，支持批量处理
- **能耗分布地图**：以地图可视化展示各站点位置及能耗情况

#### 3.2.3 通用功能
- **数据刷新**：支持手动刷新和自动刷新（默认5分钟）
- **视图切换**：支持大屏/标准视图切换
- **数据导出**：支持将看板数据导出为Excel/PDF格式
- **个性化配置**：支持用户自定义看板布局和显示内容
- **权限控制**：根据用户角色自动显示权限范围内的数据
- **响应式设计**：适配桌面端、平板和移动端

### 3.3 业务规则
- 核心指标区数据必须实时更新（误差不超过1分钟）
- 区域能耗分析需自动标注占比超过20%的高能耗区域
- 设备能耗分析仅展示Top 10高能耗设备
- 时间段能耗分析需自动标记异常波动时段（波动超过20%）
- 告警记录按级别（紧急/重要/一般）用不同颜色标识
- 自动刷新频率可配置，范围1-30分钟

## 4. 数据流向

### 4.1 数据流程图
系统管理模块 → 首页数据展示模块 → 数据采集模块/数据存储 → 数据处理 → 可视化展示 → 用户交互

### 4.2 数据存储
- 能耗实时数据：临时缓存，定期更新
- 能耗历史数据：数据仓库，用于趋势分析
- 告警信息：告警管理系统，用于实时展示
- 用户配置：用户个性化设置，本地存储

### 4.3 数据关联
- 与系统管理模块关联：获取用户角色和权限信息
- 与数据采集模块关联：获取实时能耗数据
- 与能耗分析预警模块关联：获取告警信息
- 与设备与系统管理模块关联：获取设备和区域信息
- 与单站能耗分析模块关联：支持数据下钻分析
- 与多站能耗对比模块关联：支持多站数据对比

## 5. 功能交互

### 5.1 界面原型

#### 5.1.1 单站数据看板
- **布局**：采用响应式网格布局，左侧为核心指标区，中间为区域能耗和设备能耗分析，右侧为时间段能耗分析和告警记录
- **组件**：
  - 核心指标：数字卡片+对比箭头
  - 区域能耗：环形图+表格组合
  - 设备能耗：柱状图（Top 10）
  - 时间段能耗：折线图（24小时）
  - 告警记录：列表+颜色标识
  - 运营场景：卡片式展示

#### 5.1.2 多站数据看板
- **布局**：采用响应式网格布局，顶部为核心指标区，左侧为站点能耗分析和人流量趋势，右侧为单位面积能耗对比和告警列表，底部为能耗分布地图
- **组件**：
  - 核心指标：数字卡片+对比箭头
  - 站点能耗：柱状图（按站点）
  - 人流量趋势：折线图（多站点）
  - 单位面积能耗：雷达图/条形图
  - 告警记录：列表+批量处理
  - 能耗分布：地图可视化

### 5.2 交互流程

#### 5.2.1 单站数据看板交互
1. 用户登录系统 → 进入单站数据看板
2. 查看核心指标区的关键数据
3. 点击区域能耗环形图中的区域 → 查看该区域详细能耗数据
4. 点击设备能耗柱状图中的设备 → 查看该设备详细信息
5. 点击时间段能耗折线图 → 查看历史同期对比
6. 点击告警记录 → 查看告警详细信息和处理建议
7. 点击运营场景卡片 → 查看节能优化建议

#### 5.2.2 多站数据看板交互
1. 用户登录系统 → 进入多站数据看板
2. 查看核心指标区的全局数据
3. 点击站点能耗柱状图中的站点 → 进入该站点的单站数据看板
4. 点击人流量趋势折线图 → 查看人流量与能耗的关联分析
5. 点击单位面积能耗对比图表 → 查看行业基准值对比
6. 点击告警记录 → 查看告警详细信息和批量处理
7. 点击地图上的站点标记 → 查看该站点核心指标

### 5.3 操作说明
- **数据刷新**：点击刷新按钮 → 手动刷新所有数据
- **视图切换**：点击视图切换按钮 → 切换大屏/标准视图
- **数据导出**：点击导出按钮 → 选择Excel/PDF格式 → 下载数据
- **个性化配置**：点击配置按钮 → 自定义看板布局和显示内容 → 保存配置
- **时间维度切换**：点击时间切换按钮 → 切换日/周/月视图
- **筛选功能**：点击筛选按钮 → 选择筛选条件 → 查看筛选结果

## 6. 功能字段

### 6.1 核心字段定义
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| station_id | 字符串 | 32 | 主键，唯一 | 高铁站ID |
| station_name | 字符串 | 50 | 非空 | 高铁站名称 |
| total_energy | 数值型 | 10,2 | 非空 | 当前总能耗 |
| today_energy | 数值型 | 10,2 | 非空 | 今日累计能耗 |
| yesterday_energy | 数值型 | 10,2 | 非空 | 昨日同期能耗 |
| energy_per_area | 数值型 | 10,2 | 非空 | 单位面积能耗（kWh/㎡） |
| energy_saving_rate | 数值型 | 5,2 | 非空 | 节能率（%） |
| alert_count | 数值型 | 5 | 非空 | 异常告警数量 |
| area_id | 字符串 | 32 | 非空 | 区域ID |
| area_name | 字符串 | 30 | 非空 | 区域名称 |
| area_energy_ratio | 数值型 | 5,2 | 非空 | 区域能耗占比（%） |
| device_id | 字符串 | 32 | 非空 | 设备ID |
| device_name | 字符串 | 50 | 非空 | 设备名称 |
| device_energy | 数值型 | 10,2 | 非空 | 设备能耗 |
| time_period | 时间型 |  | 非空 | 时间段 |
| period_energy | 数值型 | 10,2 | 非空 | 时间段能耗 |
| alert_id | 字符串 | 32 | 非空 | 告警ID |
| alert_level | 枚举型 | 20 | 非空 | 告警级别（紧急/重要/一般） |
| alert_time | 日期时间型 |  | 非空 | 告警时间 |

### 6.2 扩展字段
| 字段名称 | 数据类型 | 长度 | 约束条件 | 描述 |
|---------|---------|------|--------|------|
| user_role | 枚举型 | 20 | 非空 | 用户角色 |
| refresh_interval | 数值型 | 5 | 非空 | 数据刷新间隔（分钟） |
| view_type | 枚举型 | 20 | 非空 | 视图类型（大屏/标准） |
| config_data | 文本型 | 1000 | 可空 | 用户个性化配置 |
| location | 字符串 | 100 | 可空 | 站点位置坐标 |

## 7. 异常情况处理

### 7.1 异常类型
- 数据加载失败：无法获取实时数据或历史数据
- 图表渲染异常：数据可视化图表无法正常显示
- 用户权限异常：用户权限信息错误或缺失
- 自动刷新异常：数据无法按照配置的间隔自动刷新
- 性能问题：页面加载或数据更新缓慢

### 7.2 异常处理机制
- **数据加载失败**：显示加载失败提示，提供重试按钮
- **图表渲染异常**：显示替代文本或简化图表，记录异常日志
- **用户权限异常**：跳转到错误页面，提示联系管理员
- **自动刷新异常**：切换到手动刷新模式，提示用户手动刷新
- **性能问题**：优化数据加载策略，显示加载状态，避免页面卡顿

### 7.3 容错设计
- 采用数据缓存机制，当实时数据加载失败时显示缓存数据
- 实现渐进式加载，优先加载核心指标数据
- 提供优雅降级方案，在低性能设备上简化图表显示
- 建立完善的错误日志记录机制，便于问题追踪和分析

## 8. 性能要求

### 8.1 响应时间
- 页面初始加载时间：不超过3秒
- 数据刷新时间：不超过2秒
- 图表渲染时间：不超过1秒
- 交互响应时间：不超过500毫秒

### 8.2 资源占用
- CPU使用率：正常情况下不超过30%
- 内存使用率：正常情况下不超过40%
- 网络请求：初始加载请求数不超过20个
- 数据传输：单次刷新数据量不超过1MB

## 9. 安全要求

### 9.1 权限控制
- 根据用户角色自动显示单站或多站数据看板
- 确保用户只能查看权限范围内的数据
- 敏感数据需进行脱敏处理

### 9.2 数据安全
- 数据传输采用加密协议
- 实时数据仅在内存中临时存储
- 用户配置数据加密存储

## 10. 测试要点

### 10.1 功能测试
- 单站和多站看板的切换功能
- 核心指标数据的准确性和实时性
- 各图表的渲染和交互功能
- 告警记录的显示和处理功能
- 数据刷新和导出功能
- 个性化配置功能

### 10.2 性能测试
- 页面加载时间测试
- 数据刷新性能测试
- 并发用户访问测试
- 大数据量场景测试

### 10.3 兼容性测试
- 不同浏览器的兼容性测试
- 不同设备的兼容性测试
- 不同屏幕尺寸的响应式测试

## 11. 依赖关系

### 11.1 内部依赖
- 系统管理模块：提供用户角色和权限信息
- 数据采集模块：提供实时能耗数据
- 能耗分析预警模块：提供告警信息
- 设备与系统管理模块：提供设备和区域信息
- 单站能耗分析模块：支持数据下钻
- 多站能耗对比模块：支持多站对比

### 11.2 外部依赖
- 地图服务：用于多站数据看板的地图可视化
- 图表库：用于数据可视化展示

## 12. 变更记录

| 版本号 | 变更日期 | 变更内容 | 变更人 |
|-------|---------|---------|--------|
| v1.0 | 2025-12-23 | 初始版本 | 全流程产品技术负责人 |
| v1.1 | 2025-01-23 | 添加实现状态章节 | 全流程产品技术负责人 |

## 13. 实现状态

### 13.1 实现概述
- **当前版本**：Demo v0.1
- **实现日期**：2025-01-23
- **实现率**：34.8%（8/23）

### 13.2 功能实现详情

#### 13.2.1 已实现功能
| 功能名称 | 实现状态 | 实现说明 |
|---------|---------|---------|
| 单站数据看板-核心指标区 | ✅ 已实现 | 展示当前总能耗、今日累计能耗、单位面积能耗、节能率、异常告警数量 |
| 单站数据看板-区域能耗分析 | ✅ 已实现 | 以环形图+表格组合展示各区域能耗占比 |
| 单站数据看板-设备能耗分析 | ✅ 已实现 | 以柱状图展示高能耗设备排名 |
| 单站数据看板-时间段能耗分析 | ✅ 已实现 | 以折线图展示24小时能耗趋势 |
| 单站数据看板-能耗告警记录 | ✅ 已实现 | 以列表展示最近告警信息 |
| 数据刷新 | ✅ 已实现 | 支持自动刷新（默认5分钟） |
| 权限控制 | ✅ 已实现 | 根据用户角色显示不同数据 |
| 响应式设计 | ✅ 已实现 | 适配不同屏幕尺寸 |

#### 13.2.2 未实现功能
| 功能名称 | 实现状态 | 功能描述 |
|---------|---------|---------|
| 多站数据看板 | ❌ 未实现 | 支持查看多个车站的能耗概览，可快速切换或同时对比 |
| 单站数据看板-运营场景联动 | ❌ 未实现 | 根据车站运行状态自动调整展示内容 |
| 高级筛选功能 | ❌ 未实现 | 支持按时间段、车站类型、能耗等级等维度筛选数据 |
| 个性化配置 | ❌ 未实现 | 允许用户自定义首页展示指标和图表布局 |
| 指标阈值设置 | ❌ 未实现 | 支持设置能耗指标的阈值，超出时自动提醒 |
| 能耗结构饼图 | ❌ 未实现 | 展示不同能耗类型（电、水、气）的占比情况 |
| 重点区域能耗排名 | ❌ 未实现 | 展示车站内各重点区域的能耗排名 |
| 能耗预警详情 | ❌ 未实现 | 点击预警记录可查看详细的能耗异常信息 |
| 趋势图时间粒度调整 | ❌ 未实现 | 支持切换趋势图的时间粒度（日、周、月、年） |
| 节能效果评估 | ❌ 未实现 | 展示节能措施实施后的效果评估数据 |
| 实时数据刷新控制 | ❌ 未实现 | 支持调整实时数据的刷新频率 |
| 移动端适配 | ❌ 未实现 | 优化首页在移动端的显示效果 |
| 数据导出功能 | ❌ 未实现 | 支持将首页数据导出为Excel或PDF格式 |
| 多语言支持 | ❌ 未实现 | 支持中英文等多语言切换 |
| 主题切换 | ❌ 未实现 | 支持明暗主题切换 |