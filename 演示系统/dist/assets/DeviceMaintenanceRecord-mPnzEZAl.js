import{C as e,D as t,E as n,M as r,N as i,O as a,S as o,T as s,a as c,c as l,d as u,f as d,g as f,h as p,i as m,k as h,o as g,p as _,r as v,s as y,u as b,w as x,x as S,y as C}from"./index-DexfLrHx.js";var w={name:`DeviceMaintenanceRecord`,setup(){let e=h(!1),t=h(!1),n=h(`table`),r=h(``),i=h(``),o=h(``),l=h(!1),u=h(!1),d=h(`add`),f=h(null),p=h(null),g=a({totalRecords:186,pendingCount:12,completedThisMonth:45,avgResponseTime:2.5}),_=a({currentPage:1,pageSize:10,total:0}),v=h([]),y=h([]),b=a({id:``,recordNo:``,deviceId:``,deviceName:``,maintenanceType:`routine`,priority:`medium`,scheduledDate:``,completedDate:``,technician:``,phone:``,description:``,content:``,cost:0,duration:0,status:`pending`,remark:``,images:[],operationLog:[]}),x={deviceId:[{required:!0,message:`请选择设备`,trigger:`change`}],maintenanceType:[{required:!0,message:`请选择维护类型`,trigger:`change`}],priority:[{required:!0,message:`请选择优先级`,trigger:`change`}],scheduledDate:[{required:!0,message:`请选择计划日期`,trigger:`change`}],technician:[{required:!0,message:`请输入维护人员`,trigger:`blur`}]},S=()=>{let e=[`routine`,`repair`,`emergency`,`preventive`],t=[`urgent`,`high`,`medium`,`low`],n=[`pending`,`in_progress`,`completed`,`cancelled`],r=[`张工`,`李工`,`王工`,`赵工`,`刘工`],i=[{id:`DEV-LIGHT-001`,name:`候车大厅主照明-A1`},{id:`DEV-AIRCON-001`,name:`中央空调机组-1号`},{id:`DEV-VENT-001`,name:`新风机组-东侧`},{id:`DEV-ELEV-001`,name:`1号客梯`},{id:`DEV-PUMP-001`,name:`生活水泵-1号`},{id:`DEV-CAM-001`,name:`出入口监控摄像头-1`},{id:`DEV-TRANS-001`,name:`配电柜-主配电室`},{id:`DEV-FAN-001`,name:`排烟风机-地下停车场`}],a=[],o={routine:`例行保养`,repair:`故障维修`,emergency:`紧急抢修`,preventive:`预防性维护`};for(let s=0;s<50;s++){let c=i[Math.floor(Math.random()*i.length)],l=e[Math.floor(Math.random()*e.length)],u=t[Math.floor(Math.random()*t.length)],d=n[Math.floor(Math.random()*n.length)],f=new Date;f.setDate(f.getDate()-Math.floor(Math.random()*30)),a.push({id:`MNT-${String(s+1).padStart(4,`0`)}`,recordNo:`MNT2024${String(s+1).padStart(5,`0`)}`,deviceId:c.id,deviceName:c.name,maintenanceType:l,priority:u,scheduledDate:f.toISOString().split(`T`)[0],completedDate:d===`completed`?new Date(f.getTime()+864e5*Math.floor(Math.random()*3+1)).toISOString().split(`T`)[0]:``,technician:r[Math.floor(Math.random()*r.length)],phone:`138****${String(Math.floor(Math.random()*1e4)).padStart(4,`0`)}`,description:`${o[l]} - 定期检查和维护`,content:`完成${o[l]}各项检查，项目包括：设备运行状态检查、参数校准、清洁保养等`,cost:Math.floor(Math.random()*5e3+500),duration:Math.floor(Math.random()*8+1),status:d,remark:d===`cancelled`?`因设备暂无故障，已取消本次维护`:``,images:[],operationLog:[{time:`${f.toISOString().split(`T`)[0]} 09:00`,action:`创建维护工单`},{time:`${f.toISOString().split(`T`)[0]} 10:30`,action:`分配维护人员`},{time:d===`completed`||d===`in_progress`?`${f.toISOString().split(`T`)[0]} 14:00`:``,action:d===`in_progress`||d===`completed`?`开始维护工作`:``},{time:d===`completed`?`${f.toISOString().split(`T`)[0]} 17:00`:``,action:d===`completed`?`完成维护工作`:``}].filter(e=>e.time&&e.action)})}return a},w=()=>{y.value=[{id:`DEV-LIGHT-001`,name:`候车大厅主照明-A1`,system:`照明系统`},{id:`DEV-LIGHT-002`,name:`候车大厅主照明-A2`,system:`照明系统`},{id:`DEV-AIRCON-001`,name:`中央空调机组-1号`,system:`空调系统`},{id:`DEV-AIRCON-002`,name:`中央空调机组-2号`,system:`空调系统`},{id:`DEV-VENT-001`,name:`新风机组-东侧`,system:`通风系统`},{id:`DEV-VENT-002`,name:`新风机组-西侧`,system:`通风系统`},{id:`DEV-ELEV-001`,name:`1号客梯`,system:`电梯系统`},{id:`DEV-ELEV-002`,name:`2号客梯`,system:`电梯系统`},{id:`DEV-PUMP-001`,name:`生活水泵-1号`,system:`给排水系统`},{id:`DEV-PUMP-002`,name:`生活水泵-2号`,system:`给排水系统`}]},T=()=>{e.value=!0,setTimeout(()=>{v.value=S(),_.total=v.value.length,e.value=!1},500)},E=()=>{d.value=`add`,Object.assign(b,{id:``,recordNo:`MNT2024${String(v.value.length+1).padStart(5,`0`)}`,deviceId:``,deviceName:``,maintenanceType:`routine`,priority:`medium`,scheduledDate:new Date().toISOString().split(`T`)[0],completedDate:``,technician:``,phone:``,description:``,content:``,cost:0,duration:0,status:`pending`,remark:``,images:[],operationLog:[]}),u.value=!0},D=e=>{d.value=`edit`,Object.assign(b,{...e}),l.value=!1,u.value=!0},O=async()=>{try{await p.value.validate(),t.value=!0,setTimeout(()=>{t.value=!1,u.value=!1,T(),c.success(d.value===`add`?`新增成功`:`保存成功`)},500)}catch(e){console.error(`Validation failed:`,e)}},k=e=>{f.value=e,l.value=!0};return s([r,i,o],()=>{T()}),C(()=>{w(),T()}),{loading:e,saveLoading:t,viewMode:n,searchKeyword:r,filterStatus:i,filterType:o,stats:g,pagination:_,maintenanceRecords:v,deviceList:y,detailDialogVisible:l,recordDialogVisible:u,dialogType:d,currentRecord:f,recordForm:b,formRules:x,formRef:p,handleAddRecord:E,handleEditRecord:D,handleSaveRecord:O,handleViewDetail:k,handleRowClick:e=>{k(e)},handleStartWork:e=>{m.confirm(`确定要开始维护工作：${e.recordNo} 吗？`,`开始维护`,{type:`info`}).then(()=>{e.status=`in_progress`,c.success(`已开始维护工作`)}).catch(()=>{})},handleCompleteWork:e=>{m.confirm(`确定要完成维护工作：${e.recordNo} 吗？`,`完成维护`,{type:`success`}).then(()=>{e.status=`completed`,e.completedDate=new Date().toISOString().split(`T`)[0],c.success(`维护工作已完成`)}).catch(()=>{})},handleCancelRecord:e=>{m.confirm(`确定要取消维护记录：${e.recordNo} 吗？`,`取消确认`,{type:`warning`}).then(()=>{e.status=`cancelled`,c.success(`已取消维护记录`)}).catch(()=>{})},handleDeviceChange:e=>{let t=y.value.find(t=>t.id===e);t&&(b.deviceName=t.name)},handleBatchScheduling:()=>{c.info(`打开批量排程对话框`)},handleExport:()=>{c.info(`导出维护记录`)},handleSearch:()=>{T()},handleSizeChange:()=>{T()},handleCurrentChange:()=>{T()},getTypeTag:e=>({routine:``,repair:`warning`,emergency:`danger`,preventive:`success`})[e]||``,getTypeName:e=>({routine:`例行保养`,repair:`故障维修`,emergency:`紧急抢修`,preventive:`预防性维护`})[e]||e,getPriorityTag:e=>({urgent:`danger`,high:`warning`,medium:``,low:`info`})[e]||``,getPriorityName:e=>({urgent:`紧急`,high:`高`,medium:`中`,low:`低`})[e]||e,getStatusTag:e=>({pending:`warning`,in_progress:`info`,completed:`success`,cancelled:`danger`})[e]||``,getStatusName:e=>({pending:`待处理`,in_progress:`进行中`,completed:`已完成`,cancelled:`已取消`})[e]||e,getTimelineType:e=>({pending:`warning`,in_progress:`primary`,completed:`success`,cancelled:`danger`})[e]||`info`}}},T={class:`device-maintenance-record`},E={class:`toolbar`},D={class:`toolbar-right`},O={class:`stats-cards`},k={class:`stat-content`},ee={class:`stat-info`},te={class:`stat-value`},ne={class:`stat-content`},re={class:`stat-info`},ie={class:`stat-value`},ae={class:`stat-content`},oe={class:`stat-info`},se={class:`stat-value`},ce={class:`stat-content`},le={class:`stat-info`},ue={class:`stat-value`},de={class:`table-section`},fe={class:`card-header`},pe={class:`header-actions`},me={key:1,class:`timeline-view`},A=[`onClick`],j={class:`timeline-header`},M={class:`record-no`},N={class:`timeline-body`},P={class:`device-info`},F={class:`device-id`},I={class:`maintenance-info`},L={class:`timeline-footer`},R={class:`pagination-section`},z={key:0,class:`detail-content`},he={key:0,class:`maintenance-images`},B={class:`image-list`},ge={key:1,class:`operation-log`};function V(i,a,s,c,m,h){let v=e(`el-button`),C=e(`el-input`),w=e(`el-option`),V=e(`el-select`),H=e(`el-card`),U=e(`el-col`),W=e(`el-row`),G=e(`el-radio-button`),_e=e(`el-radio-group`),K=e(`el-table-column`),q=e(`el-tag`),ve=e(`el-table`),J=e(`el-timeline-item`),Y=e(`el-timeline`),ye=e(`el-pagination`),X=e(`el-descriptions-item`),be=e(`el-descriptions`),xe=e(`el-image`),Z=e(`el-dialog`),Q=e(`el-divider`),$=e(`el-form-item`),Se=e(`el-date-picker`),Ce=e(`el-input-number`),we=e(`el-form`),Te=x(`loading`);return S(),_(`div`,T,[b(`div`,E,[f(v,{type:`primary`,onClick:c.handleAddRecord},{default:n(()=>[...a[21]||=[b(`i`,{class:`fa fa-plus`},null,-1),p(` 新增记录 `,-1)]]),_:1},8,[`onClick`]),f(v,{type:`warning`,onClick:c.handleBatchScheduling},{default:n(()=>[...a[22]||=[b(`i`,{class:`fa fa-calendar`},null,-1),p(` 批量排程 `,-1)]]),_:1},8,[`onClick`]),f(v,{type:`info`,onClick:c.handleExport},{default:n(()=>[...a[23]||=[b(`i`,{class:`fa fa-download`},null,-1),p(` 导出 `,-1)]]),_:1},8,[`onClick`]),b(`div`,D,[f(C,{modelValue:c.searchKeyword,"onUpdate:modelValue":a[0]||=e=>c.searchKeyword=e,placeholder:`搜索设备/单号...`,"prefix-icon":`el-icon-search`,clearable:``,style:{width:`250px`},onKeyup:g(c.handleSearch,[`enter`])},null,8,[`modelValue`,`onKeyup`]),f(V,{modelValue:c.filterStatus,"onUpdate:modelValue":a[1]||=e=>c.filterStatus=e,placeholder:`状态筛选`,clearable:``,style:{width:`140px`,"margin-left":`10px`}},{default:n(()=>[f(w,{label:`待处理`,value:`pending`}),f(w,{label:`进行中`,value:`in_progress`}),f(w,{label:`已完成`,value:`completed`}),f(w,{label:`已取消`,value:`cancelled`})]),_:1},8,[`modelValue`]),f(V,{modelValue:c.filterType,"onUpdate:modelValue":a[2]||=e=>c.filterType=e,placeholder:`类型筛选`,clearable:``,style:{width:`140px`,"margin-left":`10px`}},{default:n(()=>[f(w,{label:`例行保养`,value:`routine`}),f(w,{label:`故障维修`,value:`repair`}),f(w,{label:`紧急抢修`,value:`emergency`}),f(w,{label:`预防性维护`,value:`preventive`})]),_:1},8,[`modelValue`])])]),b(`div`,O,[f(W,{gutter:20},{default:n(()=>[f(U,{span:6},{default:n(()=>[f(H,{shadow:`hover`,class:`stat-card`},{default:n(()=>[b(`div`,k,[a[25]||=b(`div`,{class:`stat-icon`,style:{background:`linear-gradient(135deg, #409EFF 0%, #66b1ff 100%)`}},[b(`i`,{class:`fa fa-clipboard`})],-1),b(`div`,ee,[b(`div`,te,r(c.stats.totalRecords),1),a[24]||=b(`div`,{class:`stat-label`},`总维护记录`,-1)])])]),_:1})]),_:1}),f(U,{span:6},{default:n(()=>[f(H,{shadow:`hover`,class:`stat-card`},{default:n(()=>[b(`div`,ne,[a[27]||=b(`div`,{class:`stat-icon`,style:{background:`linear-gradient(135deg, #faad14 0%, #ffc53d 100%)`}},[b(`i`,{class:`fa fa-clock-o`})],-1),b(`div`,re,[b(`div`,ie,r(c.stats.pendingCount),1),a[26]||=b(`div`,{class:`stat-label`},`待处理`,-1)])])]),_:1})]),_:1}),f(U,{span:6},{default:n(()=>[f(H,{shadow:`hover`,class:`stat-card`},{default:n(()=>[b(`div`,ae,[a[29]||=b(`div`,{class:`stat-icon`,style:{background:`linear-gradient(135deg, #67c23a 0%, #85ce61 100%)`}},[b(`i`,{class:`fa fa-check-circle`})],-1),b(`div`,oe,[b(`div`,se,r(c.stats.completedThisMonth),1),a[28]||=b(`div`,{class:`stat-label`},`本月完成`,-1)])])]),_:1})]),_:1}),f(U,{span:6},{default:n(()=>[f(H,{shadow:`hover`,class:`stat-card`},{default:n(()=>[b(`div`,ce,[a[31]||=b(`div`,{class:`stat-icon`,style:{background:`linear-gradient(135deg, #f56c6c 0%, #f89898 100%)`}},[b(`i`,{class:`fa fa-exclamation-triangle`})],-1),b(`div`,le,[b(`div`,ue,r(c.stats.avgResponseTime)+`h`,1),a[30]||=b(`div`,{class:`stat-label`},`平均响应时间`,-1)])])]),_:1})]),_:1})]),_:1})]),b(`div`,de,[f(H,{shadow:`hover`},{header:n(()=>[b(`div`,fe,[a[34]||=b(`span`,null,`维护记录列表`,-1),b(`div`,pe,[f(_e,{modelValue:c.viewMode,"onUpdate:modelValue":a[3]||=e=>c.viewMode=e,size:`small`},{default:n(()=>[f(G,{label:`table`},{default:n(()=>[...a[32]||=[b(`i`,{class:`fa fa-list`},null,-1)]]),_:1}),f(G,{label:`timeline`},{default:n(()=>[...a[33]||=[b(`i`,{class:`fa fa-clock-o`},null,-1)]]),_:1})]),_:1},8,[`modelValue`])])])]),default:n(()=>[c.viewMode===`table`?t((S(),u(ve,{key:0,data:c.maintenanceRecords,stripe:``,"row-key":`id`,onRowClick:c.handleRowClick},{default:n(()=>[f(K,{prop:`recordNo`,label:`维护单号`,width:`150`}),f(K,{prop:`deviceName`,label:`设备名称`,"min-width":`180`}),f(K,{prop:`deviceId`,label:`设备编号`,width:`130`}),f(K,{prop:`maintenanceType`,label:`维护类型`,width:`120`,align:`center`},{default:n(e=>[f(q,{type:c.getTypeTag(e.row.maintenanceType),size:`small`},{default:n(()=>[p(r(c.getTypeName(e.row.maintenanceType)),1)]),_:2},1032,[`type`])]),_:1}),f(K,{prop:`priority`,label:`优先级`,width:`100`,align:`center`},{default:n(e=>[f(q,{type:c.getPriorityTag(e.row.priority),size:`small`},{default:n(()=>[p(r(c.getPriorityName(e.row.priority)),1)]),_:2},1032,[`type`])]),_:1}),f(K,{prop:`technician`,label:`维护人员`,width:`100`}),f(K,{prop:`scheduledDate`,label:`计划日期`,width:`120`}),f(K,{prop:`completedDate`,label:`完成日期`,width:`120`},{default:n(e=>[p(r(e.row.completedDate||`-`),1)]),_:1}),f(K,{prop:`status`,label:`状态`,width:`100`,align:`center`},{default:n(e=>[f(q,{type:c.getStatusTag(e.row.status)},{default:n(()=>[p(r(c.getStatusName(e.row.status)),1)]),_:2},1032,[`type`])]),_:1}),f(K,{prop:`cost`,label:`维护费用`,width:`120`,align:`right`},{default:n(e=>[b(`span`,null,`¥`+r((e.row.cost||0).toFixed(2)),1)]),_:1}),f(K,{label:`操作`,width:`200`,fixed:`right`,align:`center`},{default:n(e=>[f(v,{size:`small`,type:`primary`,text:``,onClick:y(t=>c.handleViewDetail(e.row),[`stop`])},{default:n(()=>[...a[35]||=[b(`i`,{class:`fa fa-eye`},null,-1)]]),_:1},8,[`onClick`]),e.row.status===`pending`?(S(),u(v,{key:0,size:`small`,type:`success`,text:``,onClick:y(t=>c.handleStartWork(e.row),[`stop`])},{default:n(()=>[...a[36]||=[b(`i`,{class:`fa fa-play`},null,-1)]]),_:1},8,[`onClick`])):d(``,!0),e.row.status===`in_progress`?(S(),u(v,{key:1,size:`small`,type:`warning`,text:``,onClick:y(t=>c.handleCompleteWork(e.row),[`stop`])},{default:n(()=>[...a[37]||=[b(`i`,{class:`fa fa-check`},null,-1)]]),_:1},8,[`onClick`])):d(``,!0),f(v,{size:`small`,type:`info`,text:``,onClick:y(t=>c.handleEditRecord(e.row),[`stop`])},{default:n(()=>[...a[38]||=[b(`i`,{class:`fa fa-edit`},null,-1)]]),_:1},8,[`onClick`]),e.row.status!==`completed`&&e.row.status!==`cancelled`?(S(),u(v,{key:2,size:`small`,type:`danger`,text:``,onClick:y(t=>c.handleCancelRecord(e.row),[`stop`])},{default:n(()=>[...a[39]||=[b(`i`,{class:`fa fa-times`},null,-1)]]),_:1},8,[`onClick`])):d(``,!0)]),_:1})]),_:1},8,[`data`,`onRowClick`])),[[Te,c.loading]]):(S(),_(`div`,me,[f(Y,null,{default:n(()=>[(S(!0),_(l,null,o(c.maintenanceRecords,e=>(S(),u(J,{key:e.id,timestamp:e.scheduledDate,type:c.getTimelineType(e.status),hollow:e.status===`completed`},{default:n(()=>[b(`div`,{class:`timeline-content`,onClick:t=>c.handleViewDetail(e)},[b(`div`,j,[b(`span`,M,r(e.recordNo),1),f(q,{type:c.getTypeTag(e.maintenanceType),size:`small`},{default:n(()=>[p(r(c.getTypeName(e.maintenanceType)),1)]),_:2},1032,[`type`])]),b(`div`,N,[b(`div`,P,[a[40]||=b(`i`,{class:`fa fa-cog`},null,-1),b(`span`,null,r(e.deviceName),1),b(`span`,F,`(`+r(e.deviceId)+`)`,1)]),b(`div`,I,[b(`span`,null,[a[41]||=b(`i`,{class:`fa fa-user`},null,-1),p(` `+r(e.technician),1)]),b(`span`,null,[a[42]||=b(`i`,{class:`fa fa-money`},null,-1),p(` ¥`+r((e.cost||0).toFixed(2)),1)])])]),b(`div`,L,[f(q,{type:c.getStatusTag(e.status),size:`small`},{default:n(()=>[p(r(c.getStatusName(e.status)),1)]),_:2},1032,[`type`])])],8,A)]),_:2},1032,[`timestamp`,`type`,`hollow`]))),128))]),_:1})])),b(`div`,R,[f(ye,{"current-page":c.pagination.currentPage,"onUpdate:currentPage":a[4]||=e=>c.pagination.currentPage=e,"page-size":c.pagination.pageSize,"onUpdate:pageSize":a[5]||=e=>c.pagination.pageSize=e,"page-sizes":[10,20,50,100],total:c.pagination.total,layout:`total, sizes, prev, pager, next, jumper`,onSizeChange:c.handleSizeChange,onCurrentChange:c.handleCurrentChange},null,8,[`current-page`,`page-size`,`total`,`onSizeChange`,`onCurrentChange`])])]),_:1})]),f(Z,{modelValue:c.detailDialogVisible,"onUpdate:modelValue":a[8]||=e=>c.detailDialogVisible=e,title:`维护记录详情`,width:`800px`,"close-on-click-modal":!1},{footer:n(()=>[f(v,{onClick:a[6]||=e=>c.detailDialogVisible=!1},{default:n(()=>[...a[45]||=[p(`关闭`,-1)]]),_:1}),f(v,{type:`primary`,onClick:a[7]||=e=>c.handleEditRecord(c.currentRecord)},{default:n(()=>[...a[46]||=[p(`编辑`,-1)]]),_:1})]),default:n(()=>[c.currentRecord?(S(),_(`div`,z,[f(be,{column:2,border:``},{default:n(()=>[f(X,{label:`维护单号`},{default:n(()=>[b(`strong`,null,r(c.currentRecord.recordNo),1)]),_:1}),f(X,{label:`设备名称`},{default:n(()=>[p(r(c.currentRecord.deviceName),1)]),_:1}),f(X,{label:`设备编号`},{default:n(()=>[p(r(c.currentRecord.deviceId),1)]),_:1}),f(X,{label:`维护类型`},{default:n(()=>[f(q,{type:c.getTypeTag(c.currentRecord.maintenanceType)},{default:n(()=>[p(r(c.getTypeName(c.currentRecord.maintenanceType)),1)]),_:1},8,[`type`])]),_:1}),f(X,{label:`优先级`},{default:n(()=>[f(q,{type:c.getPriorityTag(c.currentRecord.priority)},{default:n(()=>[p(r(c.getPriorityName(c.currentRecord.priority)),1)]),_:1},8,[`type`])]),_:1}),f(X,{label:`状态`},{default:n(()=>[f(q,{type:c.getStatusTag(c.currentRecord.status)},{default:n(()=>[p(r(c.getStatusName(c.currentRecord.status)),1)]),_:1},8,[`type`])]),_:1}),f(X,{label:`维护人员`},{default:n(()=>[p(r(c.currentRecord.technician),1)]),_:1}),f(X,{label:`联系电话`},{default:n(()=>[p(r(c.currentRecord.phone),1)]),_:1}),f(X,{label:`计划日期`},{default:n(()=>[p(r(c.currentRecord.scheduledDate),1)]),_:1}),f(X,{label:`完成日期`},{default:n(()=>[p(r(c.currentRecord.completedDate||`未完成`),1)]),_:1}),f(X,{label:`维护费用`},{default:n(()=>[p(`¥`+r((c.currentRecord.cost||0).toFixed(2)),1)]),_:1}),f(X,{label:`耗时`},{default:n(()=>[p(r(c.currentRecord.duration||`-`)+`小时`,1)]),_:1}),f(X,{label:`问题描述`,span:2},{default:n(()=>[p(r(c.currentRecord.description||`暂无描述`),1)]),_:1}),f(X,{label:`维护内容`,span:2},{default:n(()=>[p(r(c.currentRecord.content||`暂无记录`),1)]),_:1}),f(X,{label:`备注`,span:2},{default:n(()=>[p(r(c.currentRecord.remark||`暂无备注`),1)]),_:1})]),_:1}),c.currentRecord.images&&c.currentRecord.images.length>0?(S(),_(`div`,he,[a[43]||=b(`h4`,null,`现场照片`,-1),b(`div`,B,[(S(!0),_(l,null,o(c.currentRecord.images,(e,t)=>(S(),u(xe,{key:t,src:e,"preview-src-list":c.currentRecord.images,fit:`cover`,class:`maintenance-image`},null,8,[`src`,`preview-src-list`]))),128))])])):d(``,!0),c.currentRecord.operationLog&&c.currentRecord.operationLog.length>0?(S(),_(`div`,ge,[a[44]||=b(`h4`,null,`操作日志`,-1),f(Y,null,{default:n(()=>[(S(!0),_(l,null,o(c.currentRecord.operationLog,(e,t)=>(S(),u(J,{key:t,timestamp:e.time,placement:`top`},{default:n(()=>[p(r(e.action),1)]),_:2},1032,[`timestamp`]))),128))]),_:1})])):d(``,!0)])):d(``,!0)]),_:1},8,[`modelValue`]),f(Z,{modelValue:c.recordDialogVisible,"onUpdate:modelValue":a[20]||=e=>c.recordDialogVisible=e,title:c.dialogType===`add`?`新增维护记录`:`编辑维护记录`,width:`700px`,"close-on-click-modal":!1},{footer:n(()=>[f(v,{onClick:a[19]||=e=>c.recordDialogVisible=!1},{default:n(()=>[...a[51]||=[p(`取消`,-1)]]),_:1}),f(v,{type:`primary`,onClick:c.handleSaveRecord,loading:c.saveLoading},{default:n(()=>[...a[52]||=[p(`保存`,-1)]]),_:1},8,[`onClick`,`loading`])]),default:n(()=>[f(we,{ref:`formRef`,model:c.recordForm,rules:c.formRules,"label-width":`100px`,class:`maintenance-form`},{default:n(()=>[f(Q,{"content-position":`left`},{default:n(()=>[...a[47]||=[p(`基本信息`,-1)]]),_:1}),f(W,{gutter:20},{default:n(()=>[f(U,{span:12},{default:n(()=>[f($,{label:`设备`,prop:`deviceId`},{default:n(()=>[f(V,{modelValue:c.recordForm.deviceId,"onUpdate:modelValue":a[9]||=e=>c.recordForm.deviceId=e,placeholder:`请选择设备`,filterable:``,onChange:c.handleDeviceChange},{default:n(()=>[(S(!0),_(l,null,o(c.deviceList,e=>(S(),u(w,{key:e.id,label:`${e.name} (${e.id})`,value:e.id},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`,`onChange`])]),_:1})]),_:1}),f(U,{span:12},{default:n(()=>[f($,{label:`维护类型`,prop:`maintenanceType`},{default:n(()=>[f(V,{modelValue:c.recordForm.maintenanceType,"onUpdate:modelValue":a[10]||=e=>c.recordForm.maintenanceType=e,placeholder:`请选择维护类型`},{default:n(()=>[f(w,{label:`例行保养`,value:`routine`}),f(w,{label:`故障维修`,value:`repair`}),f(w,{label:`紧急抢修`,value:`emergency`}),f(w,{label:`预防性维护`,value:`preventive`})]),_:1},8,[`modelValue`])]),_:1})]),_:1})]),_:1}),f(W,{gutter:20},{default:n(()=>[f(U,{span:12},{default:n(()=>[f($,{label:`优先级`,prop:`priority`},{default:n(()=>[f(V,{modelValue:c.recordForm.priority,"onUpdate:modelValue":a[11]||=e=>c.recordForm.priority=e,placeholder:`请选择优先级`},{default:n(()=>[f(w,{label:`紧急`,value:`urgent`}),f(w,{label:`高`,value:`high`}),f(w,{label:`中`,value:`medium`}),f(w,{label:`低`,value:`low`})]),_:1},8,[`modelValue`])]),_:1})]),_:1}),f(U,{span:12},{default:n(()=>[f($,{label:`计划日期`,prop:`scheduledDate`},{default:n(()=>[f(Se,{modelValue:c.recordForm.scheduledDate,"onUpdate:modelValue":a[12]||=e=>c.recordForm.scheduledDate=e,type:`date`,placeholder:`选择计划日期`,"value-format":`YYYY-MM-DD`},null,8,[`modelValue`])]),_:1})]),_:1})]),_:1}),f(Q,{"content-position":`left`},{default:n(()=>[...a[48]||=[p(`人员信息`,-1)]]),_:1}),f(W,{gutter:20},{default:n(()=>[f(U,{span:12},{default:n(()=>[f($,{label:`维护人员`,prop:`technician`},{default:n(()=>[f(C,{modelValue:c.recordForm.technician,"onUpdate:modelValue":a[13]||=e=>c.recordForm.technician=e,placeholder:`请输入维护人员`},null,8,[`modelValue`])]),_:1})]),_:1}),f(U,{span:12},{default:n(()=>[f($,{label:`联系电话`,prop:`phone`},{default:n(()=>[f(C,{modelValue:c.recordForm.phone,"onUpdate:modelValue":a[14]||=e=>c.recordForm.phone=e,placeholder:`请输入联系电话`},null,8,[`modelValue`])]),_:1})]),_:1})]),_:1}),f(Q,{"content-position":`left`},{default:n(()=>[...a[49]||=[p(`维护内容`,-1)]]),_:1}),f($,{label:`问题描述`,prop:`description`},{default:n(()=>[f(C,{modelValue:c.recordForm.description,"onUpdate:modelValue":a[15]||=e=>c.recordForm.description=e,type:`textarea`,rows:3,placeholder:`请描述设备问题或维护需求`},null,8,[`modelValue`])]),_:1}),f($,{label:`维护内容`,prop:`content`},{default:n(()=>[f(C,{modelValue:c.recordForm.content,"onUpdate:modelValue":a[16]||=e=>c.recordForm.content=e,type:`textarea`,rows:3,placeholder:`请输入具体维护内容`},null,8,[`modelValue`])]),_:1}),f($,{label:`预估费用`},{default:n(()=>[f(Ce,{modelValue:c.recordForm.cost,"onUpdate:modelValue":a[17]||=e=>c.recordForm.cost=e,min:0,precision:2,"controls-position":`right`},null,8,[`modelValue`]),a[50]||=b(`span`,{class:`unit`},`元`,-1)]),_:1}),f($,{label:`备注`},{default:n(()=>[f(C,{modelValue:c.recordForm.remark,"onUpdate:modelValue":a[18]||=e=>c.recordForm.remark=e,type:`textarea`,rows:2,placeholder:`请输入备注信息`},null,8,[`modelValue`])]),_:1})]),_:1},8,[`model`,`rules`])]),_:1},8,[`modelValue`,`title`])])}var H=v(w,[[`render`,V],[`__scopeId`,`data-v-9a582f6f`]]);export{H as default};