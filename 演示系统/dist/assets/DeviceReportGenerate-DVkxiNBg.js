import{A as e,C as t,D as n,E as r,M as i,N as a,S as o,_ as s,a as c,b as l,c as u,d,f,g as p,h as m,i as h,k as g,l as _,p as v,r as y,s as b,t as x,u as S,w as C,x as w,y as T}from"./index-DexfLrHx.js";var E={name:`DeviceReportGenerate`,setup(){let e=g(!1),t=g(!1),n=g(``),r=g(``),i=g([]),a=g(1),o=g(10),u=g(0),d=g(!1),f=g(!1),p=g(!1),m=g(null),v=g(null),y=g(null),b=g(null),S=g(null),C=new Map,w=()=>{C.forEach(e=>{e&&!e.isDisposed()&&e.dispose()}),C.clear()};l(()=>{w()});let E=g({totalReports:156,monthlyReports:23,downloadCount:482,scheduledReports:12}),D=g({name:``,type:``,dateRange:[],devices:[],formats:[`pdf`,`excel`],template:`default`,remark:``}),O={name:[{required:!0,message:`请输入报表名称`,trigger:`blur`}],type:[{required:!0,message:`请选择报表类型`,trigger:`change`}],dateRange:[{required:!0,message:`请选择数据周期`,trigger:`change`}]},k=g([{id:`1`,name:`1号主变压器`},{id:`2`,name:`2号主变压器`},{id:`3`,name:`3号主变压器`},{id:`4`,name:`冷水机组A`},{id:`5`,name:`冷水机组B`},{id:`6`,name:`空调箱AHU-1`},{id:`7`,name:`空调箱AHU-2`},{id:`8`,name:`排风机组`},{id:`9`,name:`给水泵`},{id:`10`,name:`排水泵`}]),A=g([{id:`1`,name:`2024年12月能耗分析报表`,type:`energy`,startDate:`2024-12-01`,endDate:`2024-12-31`,createTime:new Date(`2024-12-25T10:30:00`),size:256e4,status:`completed`,summary:{totalDevices:156,totalEnergy:125e4,warningCount:23,maintenanceCount:45}},{id:`2`,name:`设备运行状态周报`,type:`operation`,startDate:`2024-12-16`,endDate:`2024-12-22`,createTime:new Date(`2024-12-22T18:00:00`),size:1024e3,status:`completed`,summary:{totalDevices:156,totalEnergy:32e4,warningCount:5,maintenanceCount:12}},{id:`3`,name:`月度维护记录汇总`,type:`maintenance`,startDate:`2024-12-01`,endDate:`2024-12-31`,createTime:new Date(`2024-12-25T14:00:00`),size:512e3,status:`completed`,summary:{totalDevices:156,totalEnergy:0,warningCount:0,maintenanceCount:45}},{id:`4`,name:`预警事件统计报表`,type:`warning`,startDate:`2024-12-01`,endDate:`2024-12-31`,createTime:new Date(`2024-12-25T16:00:00`),size:768e3,status:`completed`,summary:{totalDevices:156,totalEnergy:0,warningCount:156,maintenanceCount:0}},{id:`5`,name:`综合能耗分析报告`,type:`comprehensive`,startDate:`2024-11-01`,endDate:`2024-11-30`,createTime:new Date(`2024-12-01T09:00:00`),size:512e4,status:`completed`,summary:{totalDevices:156,totalEnergy:138e4,warningCount:45,maintenanceCount:52}}]),ee=g([{id:`1`,name:`月度能耗分析`,icon:`fa fa-bar-chart text-primary`,description:`包含能耗趋势、设备对比、异常分析`,type:`energy`},{id:`2`,name:`设备运行报告`,icon:`fa fa-cogs text-success`,description:`设备状态、运行时长、故障统计`,type:`operation`},{id:`3`,name:`维护记录汇总`,icon:`fa fa-wrench text-warning`,description:`维护计划、完成情况、成本统计`,type:`maintenance`},{id:`4`,name:`预警统计报告`,icon:`fa fa-exclamation-triangle text-danger`,description:`预警分布、处理情况、趋势分析`,type:`warning`}]),j=g([{id:`1`,name:`月度能耗分析`,type:`energy`,description:`包含能耗趋势、设备对比、异常分析`,useCount:45,createTime:new Date(`2024-01-15`)},{id:`2`,name:`设备运行报告`,type:`operation`,description:`设备状态、运行时长、故障统计`,useCount:32,createTime:new Date(`2024-02-20`)},{id:`3`,name:`维护记录汇总`,type:`maintenance`,description:`维护计划、完成情况、成本统计`,useCount:28,createTime:new Date(`2024-03-10`)},{id:`4`,name:`预警统计报告`,type:`warning`,description:`预警分布、处理情况、趋势分析`,useCount:36,createTime:new Date(`2024-04-05`)},{id:`5`,name:`综合分析报告`,type:`comprehensive`,description:`多维度综合分析报告`,useCount:22,createTime:new Date(`2024-05-18`)}]),te=_(()=>{let e=A.value;if(n.value){let t=n.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t))}r.value&&(e=e.filter(e=>e.type===r.value)),u.value=e.length;let t=(a.value-1)*o.value;return e.slice(t,t+o.value)}),ne=_(()=>A.value.length>0),M=()=>{D.value={name:``,type:``,dateRange:[],devices:[],formats:[`pdf`,`excel`],template:`default`,remark:``},d.value=!0},N=()=>{c.info(`定时任务管理功能开发中`)},re=()=>{p.value=!0},ie=()=>{if(!r.value){c.warning(`请选择报表类型`);return}if(!i.value||i.value.length!==2){c.warning(`请选择数据周期`);return}e.value=!0,setTimeout(()=>{e.value=!1,c.success(`报表生成成功`)},2e3)},ae=async()=>{if(v.value)try{await v.value.validate(),t.value=!0,await new Promise(e=>setTimeout(e,2e3));let e={id:Date.now().toString(),name:D.value.name,type:D.value.type,startDate:D.value.dateRange[0].toLocaleDateString(),endDate:D.value.dateRange[1].toLocaleDateString(),createTime:new Date,size:Math.floor(Math.random()*3e6)+5e5,status:`completed`,summary:{totalDevices:156,totalEnergy:Math.floor(Math.random()*5e5)+1e5,warningCount:Math.floor(Math.random()*50)+10,maintenanceCount:Math.floor(Math.random()*30)+5}};A.value.unshift(e),E.value.totalReports++,E.value.monthlyReports++,d.value=!1,c.success(`报表生成成功`)}catch{c.error(`请完善表单信息`)}finally{t.value=!1}},P=e=>{m.value=e,f.value=!0,s(()=>{G()})},F=e=>{c.success(`正在下载报表：${e.name}`),E.value.downloadCount++},I=e=>{h.confirm(`确定要删除报表"${e.name}"吗？`,`确认删除`,{confirmButtonText:`确定`,cancelButtonText:`取消`,type:`warning`}).then(()=>{let t=A.value.findIndex(t=>t.id===e.id);t!==-1&&(A.value.splice(t,1),E.value.totalReports--,c.success(`删除成功`))}).catch(()=>{})},L=e=>{P(e)},R=e=>{o.value=e,a.value=1},z=e=>{a.value=e},B=e=>{D.value.type=e.type,D.value.template=e.id,M()},V=()=>{c.info(`模板创建功能开发中`)},H=e=>{c.info(`编辑模板：${e.name}`)},U=e=>{h.confirm(`确定要删除模板"${e.name}"吗？`,`确认删除`,{confirmButtonText:`确定`,cancelButtonText:`取消`,type:`warning`}).then(()=>{let t=j.value.findIndex(t=>t.id===e.id);t!==-1&&(j.value.splice(t,1),c.success(`删除成功`))}).catch(()=>{})},W=()=>{if(!y.value)return;C.has(`typeChart`)&&(C.get(`typeChart`).dispose(),C.delete(`typeChart`));let e=x(y.value);C.set(`typeChart`,e);let t={energy:A.value.filter(e=>e.type===`energy`).length,operation:A.value.filter(e=>e.type===`operation`).length,maintenance:A.value.filter(e=>e.type===`maintenance`).length,warning:A.value.filter(e=>e.type===`warning`).length,comprehensive:A.value.filter(e=>e.type===`comprehensive`).length},n={tooltip:{trigger:`item`,formatter:`{b}: {c} ({d}%)`},legend:{orient:`vertical`,right:10,top:`center`},color:[`#409EFF`,`#67C23A`,`#E6A23C`,`#F56C6C`,`#909399`],series:[{type:`pie`,radius:[`40%`,`70%`],center:[`35%`,`50%`],avoidLabelOverlap:!1,itemStyle:{borderRadius:8,borderColor:`#fff`,borderWidth:2},label:{show:!1},emphasis:{label:{show:!0,fontSize:14,fontWeight:`bold`}},data:[{value:t.energy,name:`能耗报表`},{value:t.operation,name:`运行报表`},{value:t.maintenance,name:`维护报表`},{value:t.warning,name:`预警报表`},{value:t.comprehensive,name:`综合报表`}]}]};e.setOption(n)},G=()=>{if(b.value&&m.value){C.has(`previewChart`)&&(C.get(`previewChart`).dispose(),C.delete(`previewChart`));let e=x(b.value);C.set(`previewChart`,e);let t=[],n=[];for(let e=1;e<=30;e++)t.push(`${e}日`),n.push(Math.floor(Math.random()*5e4)+3e4);let r={tooltip:{trigger:`axis`},legend:{data:[`实际能耗`,`预测能耗`]},grid:{left:`3%`,right:`4%`,bottom:`3%`,containLabel:!0},xAxis:{type:`category`,data:t},yAxis:{type:`value`,name:`kWh`},series:[{name:`实际能耗`,type:`line`,smooth:!0,data:n,itemStyle:{color:`#409EFF`},areaStyle:{color:`rgba(64, 158, 255, 0.1)`}},{name:`预测能耗`,type:`line`,smooth:!0,data:n.map(e=>e*(.95+Math.random()*.1)),itemStyle:{color:`#67C23A`},lineStyle:{type:`dashed`}}]};e.setOption(r)}if(S.value&&m.value){C.has(`previewPie`)&&(C.get(`previewPie`).dispose(),C.delete(`previewPie`));let e=x(S.value);C.set(`previewPie`,e),e.setOption({tooltip:{trigger:`item`,formatter:`{b}: {c} ({d}%)`},legend:{orient:`vertical`,right:10,top:`center`},color:[`#67C23A`,`#409EFF`,`#E6A23C`,`#F56C6C`],series:[{type:`pie`,radius:[`30%`,`60%`],center:[`35%`,`50%`],data:[{value:120,name:`正常运行`},{value:25,name:`维护中`},{value:8,name:`异常`},{value:3,name:`离线`}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:`rgba(0, 0, 0, 0.5)`}}}]})}};return T(()=>{s(()=>{W()})}),{loading:e,generating:t,searchKeyword:n,reportType:r,dateRange:i,currentPage:a,pageSize:o,total:u,stats:E,newReportForm:D,reportRules:O,deviceList:k,reports:A,templates:ee,allTemplates:j,filteredReports:te,hasReportData:ne,newReportDialogVisible:d,previewDialogVisible:f,templateDialogVisible:p,currentReport:m,reportFormRef:v,typeChartRef:y,previewChartRef:b,previewPieRef:S,handleNewReport:M,handleAutoGenerate:N,handleTemplateManage:re,handleGenerate:ie,handleCreateReport:ae,handlePreview:P,handleDownload:F,handleDelete:I,handleRowClick:L,handleSizeChange:R,handlePageChange:z,handleUseTemplate:B,handleNewTemplate:V,handleEditTemplate:H,handleDeleteTemplate:U,getReportIcon:e=>({energy:`fa fa-bar-chart text-primary`,operation:`fa fa-cogs text-success`,maintenance:`fa fa-wrench text-warning`,warning:`fa fa-exclamation-triangle text-danger`,comprehensive:`fa fa-file-text-o text-info`})[e]||`fa fa-file-o`,getTypeTag:e=>({energy:`primary`,operation:`success`,maintenance:`warning`,warning:`danger`,comprehensive:`info`})[e]||`info`,getTypeName:e=>({energy:`能耗报表`,operation:`运行报表`,maintenance:`维护报表`,warning:`预警报表`,comprehensive:`综合报表`})[e]||e,getStatusType:e=>({completed:`success`,pending:`warning`,failed:`danger`})[e]||`info`,getStatusName:e=>({completed:`已完成`,pending:`生成中`,failed:`失败`})[e]||e,formatTime:e=>{if(!e)return`-`;let t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,`0`)}-${String(t.getDate()).padStart(2,`0`)} ${String(t.getHours()).padStart(2,`0`)}:${String(t.getMinutes()).padStart(2,`0`)}`},formatFileSize:e=>e<1024?e+` B`:e<1024*1024?(e/1024).toFixed(1)+` KB`:(e/(1024*1024)).toFixed(1)+` MB`}}},D={class:`device-report-generate`},O={class:`toolbar`},k={class:`toolbar-right`},A={class:`stats-section`},ee={class:`stat-content`},j={class:`stat-info`},te={class:`stat-value`},ne={class:`stat-content`},M={class:`stat-info`},N={class:`stat-value`},re={class:`stat-content`},ie={class:`stat-info`},ae={class:`stat-value`},P={class:`stat-content`},F={class:`stat-info`},I={class:`stat-value`},L={class:`main-content`},R={class:`card-header`},z={class:`header-actions`},B={class:`report-list`},V={class:`report-name`},H={class:`pagination-section`},U={ref:`typeChartRef`,class:`type-chart`},W={class:`card-header`},G={class:`template-list`},oe=[`onClick`],se={class:`template-icon`},ce={class:`template-info`},le={class:`template-name`},ue={class:`template-desc`},de={class:`template-action`},fe={class:`preview-header`},pe={class:`preview-title`},me={class:`preview-meta`},he={key:0,class:`preview-content`},ge={class:`preview-section`},_e={class:`summary-grid`},ve={class:`summary-item`},ye={class:`summary-value`},be={class:`summary-item`},xe={class:`summary-value`},Se={class:`summary-item`},Ce={class:`summary-value`},we={class:`summary-item`},Te={class:`summary-value`},Ee={class:`preview-section`},De={ref:`previewChartRef`,class:`preview-chart`},Oe={class:`preview-section`},ke={ref:`previewPieRef`,class:`preview-pie`},Ae={class:`template-manage-header`};function K(a,s,c,l,h,g){let _=t(`el-button`),y=t(`el-option`),x=t(`el-select`),T=t(`el-date-picker`),E=t(`el-card`),K=t(`el-col`),q=t(`el-row`),J=t(`el-input`),Y=t(`el-table-column`),X=t(`el-tag`),je=t(`el-table`),Me=t(`el-pagination`),Z=t(`el-form-item`),Q=t(`el-checkbox`),Ne=t(`el-checkbox-group`),Pe=t(`el-form`),$=t(`el-dialog`),Fe=C(`loading`);return w(),v(`div`,D,[S(`div`,O,[p(_,{type:`primary`,onClick:l.handleNewReport},{default:r(()=>[...s[19]||=[S(`i`,{class:`fa fa-plus`},null,-1),m(` 新建报表 `,-1)]]),_:1},8,[`onClick`]),p(_,{type:`success`,onClick:l.handleAutoGenerate},{default:r(()=>[...s[20]||=[S(`i`,{class:`fa fa-clock-o`},null,-1),m(` 自动生成 `,-1)]]),_:1},8,[`onClick`]),p(_,{type:`info`,onClick:l.handleTemplateManage},{default:r(()=>[...s[21]||=[S(`i`,{class:`fa fa-cogs`},null,-1),m(` 模板管理 `,-1)]]),_:1},8,[`onClick`]),S(`div`,k,[p(x,{modelValue:l.reportType,"onUpdate:modelValue":s[0]||=e=>l.reportType=e,placeholder:`报表类型`,clearable:``,style:{width:`150px`}},{default:r(()=>[p(y,{label:`能耗报表`,value:`energy`}),p(y,{label:`设备运行报表`,value:`operation`}),p(y,{label:`维护报表`,value:`maintenance`}),p(y,{label:`预警报表`,value:`warning`}),p(y,{label:`综合报表`,value:`comprehensive`})]),_:1},8,[`modelValue`]),p(T,{modelValue:l.dateRange,"onUpdate:modelValue":s[1]||=e=>l.dateRange=e,type:`daterange`,"range-separator":`至`,"start-placeholder":`开始日期`,"end-placeholder":`结束日期`,style:{width:`250px`,"margin-left":`10px`}},null,8,[`modelValue`]),p(_,{type:`primary`,onClick:l.handleGenerate,style:{"margin-left":`10px`}},{default:r(()=>[...s[22]||=[S(`i`,{class:`fa fa-bar-chart`},null,-1),m(` 生成报表 `,-1)]]),_:1},8,[`onClick`])])]),S(`div`,A,[p(q,{gutter:20},{default:r(()=>[p(K,{span:6},{default:r(()=>[p(E,{shadow:`hover`,class:`stat-card`},{default:r(()=>[S(`div`,ee,[s[24]||=S(`div`,{class:`stat-icon`},[S(`i`,{class:`fa fa-file-text-o`})],-1),S(`div`,j,[S(`div`,te,i(l.stats.totalReports),1),s[23]||=S(`div`,{class:`stat-label`},`报表总数`,-1)])])]),_:1})]),_:1}),p(K,{span:6},{default:r(()=>[p(E,{shadow:`hover`,class:`stat-card primary`},{default:r(()=>[S(`div`,ne,[s[26]||=S(`div`,{class:`stat-icon`},[S(`i`,{class:`fa fa-bar-chart`})],-1),S(`div`,M,[S(`div`,N,i(l.stats.monthlyReports),1),s[25]||=S(`div`,{class:`stat-label`},`本月生成`,-1)])])]),_:1})]),_:1}),p(K,{span:6},{default:r(()=>[p(E,{shadow:`hover`,class:`stat-card success`},{default:r(()=>[S(`div`,re,[s[28]||=S(`div`,{class:`stat-icon`},[S(`i`,{class:`fa fa-download`})],-1),S(`div`,ie,[S(`div`,ae,i(l.stats.downloadCount),1),s[27]||=S(`div`,{class:`stat-label`},`下载次数`,-1)])])]),_:1})]),_:1}),p(K,{span:6},{default:r(()=>[p(E,{shadow:`hover`,class:`stat-card warning`},{default:r(()=>[S(`div`,P,[s[30]||=S(`div`,{class:`stat-icon`},[S(`i`,{class:`fa fa-clock-o`})],-1),S(`div`,F,[S(`div`,I,i(l.stats.scheduledReports),1),s[29]||=S(`div`,{class:`stat-label`},`定时任务`,-1)])])]),_:1})]),_:1})]),_:1})]),S(`div`,L,[p(q,{gutter:20},{default:r(()=>[p(K,{span:14},{default:r(()=>[p(E,{shadow:`hover`},{header:r(()=>[S(`div`,R,[s[31]||=S(`span`,null,`报表列表`,-1),S(`div`,z,[p(J,{modelValue:l.searchKeyword,"onUpdate:modelValue":s[2]||=e=>l.searchKeyword=e,placeholder:`搜索报表名称...`,"prefix-icon":`el-icon-search`,clearable:``,style:{width:`200px`}},null,8,[`modelValue`])])])]),default:r(()=>[n((w(),v(`div`,B,[p(je,{data:l.filteredReports,stripe:``,"row-key":`id`,onRowClick:l.handleRowClick},{default:r(()=>[p(Y,{prop:`name`,label:`报表名称`,"min-width":`200`},{default:r(t=>[S(`div`,V,[S(`i`,{class:e(l.getReportIcon(t.row.type))},null,2),S(`span`,null,i(t.row.name),1)])]),_:1}),p(Y,{prop:`type`,label:`类型`,width:`120`,align:`center`},{default:r(e=>[p(X,{type:l.getTypeTag(e.row.type),size:`small`},{default:r(()=>[m(i(l.getTypeName(e.row.type)),1)]),_:2},1032,[`type`])]),_:1}),p(Y,{prop:`dateRange`,label:`数据周期`,width:`200`},{default:r(e=>[m(i(e.row.startDate)+` ~ `+i(e.row.endDate),1)]),_:1}),p(Y,{prop:`createTime`,label:`生成时间`,width:`160`},{default:r(e=>[m(i(l.formatTime(e.row.createTime)),1)]),_:1}),p(Y,{prop:`size`,label:`文件大小`,width:`100`,align:`right`},{default:r(e=>[m(i(l.formatFileSize(e.row.size)),1)]),_:1}),p(Y,{prop:`status`,label:`状态`,width:`100`,align:`center`},{default:r(e=>[p(X,{type:l.getStatusType(e.row.status),size:`small`},{default:r(()=>[m(i(l.getStatusName(e.row.status)),1)]),_:2},1032,[`type`])]),_:1}),p(Y,{label:`操作`,width:`200`,align:`center`,fixed:`right`},{default:r(e=>[p(_,{type:`primary`,size:`mini`,text:``,onClick:b(t=>l.handlePreview(e.row),[`stop`])},{default:r(()=>[...s[32]||=[S(`i`,{class:`fa fa-eye`},null,-1),m(` 预览 `,-1)]]),_:1},8,[`onClick`]),p(_,{type:`success`,size:`mini`,text:``,onClick:b(t=>l.handleDownload(e.row),[`stop`])},{default:r(()=>[...s[33]||=[S(`i`,{class:`fa fa-download`},null,-1),m(` 下载 `,-1)]]),_:1},8,[`onClick`]),p(_,{type:`danger`,size:`mini`,text:``,onClick:b(t=>l.handleDelete(e.row),[`stop`])},{default:r(()=>[...s[34]||=[S(`i`,{class:`fa fa-trash`},null,-1),m(` 删除 `,-1)]]),_:1},8,[`onClick`])]),_:1})]),_:1},8,[`data`,`onRowClick`]),S(`div`,H,[p(Me,{"current-page":l.currentPage,"onUpdate:currentPage":s[3]||=e=>l.currentPage=e,"page-size":l.pageSize,"onUpdate:pageSize":s[4]||=e=>l.pageSize=e,"page-sizes":[10,20,50,100],total:l.total,layout:`total, sizes, prev, pager, next, jumper`,onSizeChange:l.handleSizeChange,onCurrentChange:l.handlePageChange},null,8,[`current-page`,`page-size`,`total`,`onSizeChange`,`onCurrentChange`])])])),[[Fe,l.loading]])]),_:1})]),_:1}),p(K,{span:10},{default:r(()=>[p(E,{shadow:`hover`},{header:r(()=>[...s[35]||=[S(`div`,{class:`card-header`},[S(`span`,null,`报表生成统计`)],-1)]]),default:r(()=>[S(`div`,U,null,512)]),_:1}),p(E,{shadow:`hover`,class:`template-card`},{header:r(()=>[S(`div`,W,[s[37]||=S(`span`,null,`常用模板`,-1),p(_,{type:`text`,size:`small`,onClick:l.handleTemplateManage},{default:r(()=>[...s[36]||=[S(`i`,{class:`fa fa-cog`},null,-1),m(` 管理 `,-1)]]),_:1},8,[`onClick`])])]),default:r(()=>[S(`div`,G,[(w(!0),v(u,null,o(l.templates,t=>(w(),v(`div`,{key:t.id,class:`template-item`,onClick:e=>l.handleUseTemplate(t)},[S(`div`,se,[S(`i`,{class:e(t.icon)},null,2)]),S(`div`,ce,[S(`div`,le,i(t.name),1),S(`div`,ue,i(t.description),1)]),S(`div`,de,[p(_,{type:`primary`,size:`mini`,circle:``},{default:r(()=>[...s[38]||=[S(`i`,{class:`fa fa-arrow-right`},null,-1)]]),_:1})])],8,oe))),128))])]),_:1})]),_:1})]),_:1})]),p($,{modelValue:l.newReportDialogVisible,"onUpdate:modelValue":s[13]||=e=>l.newReportDialogVisible=e,title:`新建报表`,width:`600px`,"close-on-click-modal":!1},{footer:r(()=>[p(_,{onClick:s[12]||=e=>l.newReportDialogVisible=!1},{default:r(()=>[...s[43]||=[m(`取消`,-1)]]),_:1}),p(_,{type:`primary`,onClick:l.handleCreateReport,loading:l.generating},{default:r(()=>[m(i(l.generating?`生成中...`:`生成报表`),1)]),_:1},8,[`onClick`,`loading`])]),default:r(()=>[p(Pe,{model:l.newReportForm,"label-width":`100px`,rules:l.reportRules,ref:`reportFormRef`},{default:r(()=>[p(Z,{label:`报表名称`,prop:`name`},{default:r(()=>[p(J,{modelValue:l.newReportForm.name,"onUpdate:modelValue":s[5]||=e=>l.newReportForm.name=e,placeholder:`请输入报表名称`},null,8,[`modelValue`])]),_:1}),p(Z,{label:`报表类型`,prop:`type`},{default:r(()=>[p(x,{modelValue:l.newReportForm.type,"onUpdate:modelValue":s[6]||=e=>l.newReportForm.type=e,placeholder:`请选择报表类型`,style:{width:`100%`}},{default:r(()=>[p(y,{label:`能耗报表`,value:`energy`}),p(y,{label:`设备运行报表`,value:`operation`}),p(y,{label:`维护报表`,value:`maintenance`}),p(y,{label:`预警报表`,value:`warning`}),p(y,{label:`综合报表`,value:`comprehensive`})]),_:1},8,[`modelValue`])]),_:1}),p(Z,{label:`数据周期`,prop:`dateRange`},{default:r(()=>[p(T,{modelValue:l.newReportForm.dateRange,"onUpdate:modelValue":s[7]||=e=>l.newReportForm.dateRange=e,type:`daterange`,"range-separator":`至`,"start-placeholder":`开始日期`,"end-placeholder":`结束日期`,style:{width:`100%`}},null,8,[`modelValue`])]),_:1}),p(Z,{label:`选择设备`,prop:`devices`},{default:r(()=>[p(x,{modelValue:l.newReportForm.devices,"onUpdate:modelValue":s[8]||=e=>l.newReportForm.devices=e,multiple:``,placeholder:`请选择设备`,style:{width:`100%`}},{default:r(()=>[(w(!0),v(u,null,o(l.deviceList,e=>(w(),d(y,{key:e.id,label:e.name,value:e.id},null,8,[`label`,`value`]))),128))]),_:1},8,[`modelValue`])]),_:1}),p(Z,{label:`输出格式`},{default:r(()=>[p(Ne,{modelValue:l.newReportForm.formats,"onUpdate:modelValue":s[9]||=e=>l.newReportForm.formats=e},{default:r(()=>[p(Q,{label:`pdf`},{default:r(()=>[...s[39]||=[m(`PDF`,-1)]]),_:1}),p(Q,{label:`excel`},{default:r(()=>[...s[40]||=[m(`Excel`,-1)]]),_:1}),p(Q,{label:`word`},{default:r(()=>[...s[41]||=[m(`Word`,-1)]]),_:1}),p(Q,{label:`html`},{default:r(()=>[...s[42]||=[m(`HTML`,-1)]]),_:1})]),_:1},8,[`modelValue`])]),_:1}),p(Z,{label:`报表模板`},{default:r(()=>[p(x,{modelValue:l.newReportForm.template,"onUpdate:modelValue":s[10]||=e=>l.newReportForm.template=e,placeholder:`选择报表模板`,style:{width:`100%`}},{default:r(()=>[p(y,{label:`默认模板`,value:`default`}),p(y,{label:`详细报告`,value:`detailed`}),p(y,{label:`简洁报告`,value:`simple`}),p(y,{label:`自定义模板`,value:`custom`})]),_:1},8,[`modelValue`])]),_:1}),p(Z,{label:`备注`},{default:r(()=>[p(J,{modelValue:l.newReportForm.remark,"onUpdate:modelValue":s[11]||=e=>l.newReportForm.remark=e,type:`textarea`,rows:3,placeholder:`请输入备注信息`},null,8,[`modelValue`])]),_:1})]),_:1},8,[`model`,`rules`])]),_:1},8,[`modelValue`]),p($,{modelValue:l.previewDialogVisible,"onUpdate:modelValue":s[16]||=e=>l.previewDialogVisible=e,title:`报表预览`,width:`900px`,top:`5vh`},{footer:r(()=>[p(_,{onClick:s[14]||=e=>l.previewDialogVisible=!1},{default:r(()=>[...s[51]||=[m(`关闭`,-1)]]),_:1}),p(_,{type:`primary`,onClick:s[15]||=e=>l.handleDownload(l.currentReport)},{default:r(()=>[...s[52]||=[S(`i`,{class:`fa fa-download`},null,-1),m(` 下载报表 `,-1)]]),_:1})]),default:r(()=>[S(`div`,fe,[S(`div`,pe,i(l.currentReport?.name),1),S(`div`,me,[S(`span`,null,`报表类型：`+i(l.getTypeName(l.currentReport?.type)),1),S(`span`,null,`数据周期：`+i(l.currentReport?.startDate)+` ~ `+i(l.currentReport?.endDate),1),S(`span`,null,`生成时间：`+i(l.formatTime(l.currentReport?.createTime)),1)])]),l.currentReport?(w(),v(`div`,he,[S(`div`,ge,[s[48]||=S(`h4`,null,`报表摘要`,-1),S(`div`,_e,[S(`div`,ve,[s[44]||=S(`span`,{class:`summary-label`},`设备总数`,-1),S(`span`,ye,i(l.currentReport.summary?.totalDevices||0),1)]),S(`div`,be,[s[45]||=S(`span`,{class:`summary-label`},`总能耗`,-1),S(`span`,xe,i(l.currentReport.summary?.totalEnergy||0)+` kWh`,1)]),S(`div`,Se,[s[46]||=S(`span`,{class:`summary-label`},`预警次数`,-1),S(`span`,Ce,i(l.currentReport.summary?.warningCount||0),1)]),S(`div`,we,[s[47]||=S(`span`,{class:`summary-label`},`维护次数`,-1),S(`span`,Te,i(l.currentReport.summary?.maintenanceCount||0),1)])])]),S(`div`,Ee,[s[49]||=S(`h4`,null,`能耗趋势`,-1),S(`div`,De,null,512)]),S(`div`,Oe,[s[50]||=S(`h4`,null,`设备状态分布`,-1),S(`div`,ke,null,512)])])):f(``,!0)]),_:1},8,[`modelValue`]),p($,{modelValue:l.templateDialogVisible,"onUpdate:modelValue":s[18]||=e=>l.templateDialogVisible=e,title:`模板管理`,width:`800px`},{footer:r(()=>[p(_,{onClick:s[17]||=e=>l.templateDialogVisible=!1},{default:r(()=>[...s[56]||=[m(`关闭`,-1)]]),_:1})]),default:r(()=>[S(`div`,Ae,[p(_,{type:`primary`,onClick:l.handleNewTemplate},{default:r(()=>[...s[53]||=[S(`i`,{class:`fa fa-plus`},null,-1),m(` 新建模板 `,-1)]]),_:1},8,[`onClick`])]),p(je,{data:l.allTemplates,stripe:``,"row-key":`id`},{default:r(()=>[p(Y,{prop:`name`,label:`模板名称`,"min-width":`150`}),p(Y,{prop:`type`,label:`适用类型`,width:`120`,align:`center`},{default:r(e=>[p(X,{size:`small`},{default:r(()=>[m(i(l.getTypeName(e.row.type)),1)]),_:2},1024)]),_:1}),p(Y,{prop:`description`,label:`描述`,"min-width":`200`}),p(Y,{prop:`useCount`,label:`使用次数`,width:`100`,align:`center`}),p(Y,{prop:`createTime`,label:`创建时间`,width:`160`},{default:r(e=>[m(i(l.formatTime(e.row.createTime)),1)]),_:1}),p(Y,{label:`操作`,width:`150`,align:`center`},{default:r(e=>[p(_,{type:`primary`,size:`mini`,text:``,onClick:t=>l.handleEditTemplate(e.row)},{default:r(()=>[...s[54]||=[S(`i`,{class:`fa fa-edit`},null,-1),m(` 编辑 `,-1)]]),_:1},8,[`onClick`]),p(_,{type:`danger`,size:`mini`,text:``,onClick:t=>l.handleDeleteTemplate(e.row)},{default:r(()=>[...s[55]||=[S(`i`,{class:`fa fa-trash`},null,-1),m(` 删除 `,-1)]]),_:1},8,[`onClick`])]),_:1})]),_:1},8,[`data`])]),_:1},8,[`modelValue`])])}var q=y(E,[[`render`,K],[`__scopeId`,`data-v-6daacfa6`]]);export{q as default};