import{C as e,D as t,E as n,M as r,N as i,O as a,a as o,d as s,f as c,g as l,h as u,i as d,k as f,p,r as m,u as h,w as g,x as _,y as v}from"./index-DexfLrHx.js";var y={name:`SystemManage`,setup(){let e=f(!1),t=f([]),n=f(!1),r=f(`add`),i=f(null),s=a({systemId:``,systemName:``,systemType:``,deviceCount:0,totalPower:0,status:`running`,description:``,createTime:``}),c={systemName:[{required:!0,message:`请输入系统名称`,trigger:`blur`}],systemType:[{required:!0,message:`请选择系统类型`,trigger:`change`}],totalPower:[{required:!0,message:`请输入总功率`,trigger:`blur`}]},l=()=>`SYS`+Date.now().toString(36).toUpperCase(),u=()=>{e.value=!0,setTimeout(()=>{t.value=[{systemId:`SYS001`,systemName:`空调制冷系统`,systemType:`环境控制系统`,deviceCount:45,totalPower:1250.5,status:`running`,description:`车站中央空调制冷设备系统，负责候车大厅及办公区域制冷`,createTime:`2024-01-15 10:30:00`},{systemId:`SYS002`,systemName:`照明系统`,systemType:`照明系统`,deviceCount:320,totalPower:85.6,status:`running`,description:`车站全部照明设备，包括候车大厅、站台、办公区等`,createTime:`2024-01-15 10:30:00`},{systemId:`SYS003`,systemName:`电梯扶梯系统`,systemType:`电梯扶梯系统`,deviceCount:28,totalPower:680,status:`running`,description:`车站所有电梯和扶梯设备`,createTime:`2024-01-15 10:30:00`},{systemId:`SYS004`,systemName:`给排水系统`,systemType:`供水系统`,deviceCount:15,totalPower:45.2,status:`running`,description:`车站给水排水设备系统`,createTime:`2024-01-15 10:30:00`},{systemId:`SYS005`,systemName:`供电系统`,systemType:`供电系统`,deviceCount:8,totalPower:0,status:`running`,description:`车站主供电及配电系统`,createTime:`2024-01-15 10:30:00`}],e.value=!1},500)};return v(()=>{u()}),{loading:e,systemList:t,dialogVisible:n,dialogType:r,formRef:i,currentSystem:s,rules:c,getTypeTag:e=>({核心动力系统:`danger`,环境控制系统:`primary`,照明系统:`success`,电梯扶梯系统:`warning`,供水系统:`info`,供电系统:``})[e]||``,handleAdd:()=>{r.value=`add`,Object.assign(s,{systemId:``,systemName:``,systemType:``,deviceCount:0,totalPower:0,status:`running`,description:``,createTime:``}),n.value=!0},handleEdit:e=>{r.value=`edit`,Object.assign(s,e),n.value=!0},handleDelete:e=>{d.confirm(`确定要删除系统"`+e.systemName+`"吗？`,`警告`,{confirmButtonText:`确定`,cancelButtonText:`取消`,type:`warning`}).then(()=>{t.value=t.value.filter(t=>t.systemId!==e.systemId),o.success(`删除成功`)}).catch(()=>{o.info(`已取消删除`)})},handleSave:async()=>{try{if(await i.value.validate(),r.value===`add`){let e={...s,systemId:l(),createTime:new Date().toLocaleString()};t.value.push(e),o.success(`添加成功`)}else{let e=t.value.findIndex(e=>e.systemId===s.systemId);e!==-1&&(t.value[e]={...s}),o.success(`更新成功`)}n.value=!1}catch(e){console.error(`验证失败`,e)}},handleExport:()=>{o.info(`导出功能开发中`)}}}},b={class:`system-manage`},x={class:`toolbar`};function S(i,a,o,d,f,m){let v=e(`el-button`),y=e(`el-table-column`),S=e(`el-tag`),C=e(`el-table`),w=e(`el-input`),T=e(`el-form-item`),E=e(`el-option`),D=e(`el-select`),O=e(`el-input-number`),k=e(`el-radio`),A=e(`el-radio-group`),j=e(`el-form`),M=e(`el-dialog`),N=g(`loading`);return _(),p(`div`,b,[h(`div`,x,[l(v,{type:`primary`,onClick:d.handleAdd},{default:n(()=>[...a[8]||=[h(`i`,{class:`fa fa-plus`},null,-1),u(` 新增系统 `,-1)]]),_:1},8,[`onClick`]),l(v,{type:`success`,onClick:d.handleExport},{default:n(()=>[...a[9]||=[h(`i`,{class:`fa fa-download`},null,-1),u(` 导出 `,-1)]]),_:1},8,[`onClick`])]),t((_(),s(C,{data:d.systemList,stripe:``,style:{width:`100%`}},{default:n(()=>[l(y,{prop:`systemId`,label:`系统ID`,width:`120`}),l(y,{prop:`systemName`,label:`系统名称`,width:`180`}),l(y,{prop:`systemType`,label:`系统类型`,width:`120`},{default:n(e=>[l(S,{type:d.getTypeTag(e.row.systemType)},{default:n(()=>[u(r(e.row.systemType),1)]),_:2},1032,[`type`])]),_:1}),l(y,{prop:`deviceCount`,label:`设备数量`,width:`100`,align:`center`}),l(y,{prop:`totalPower`,label:`总功率(kW)`,width:`120`,align:`right`}),l(y,{prop:`status`,label:`运行状态`,width:`100`},{default:n(e=>[l(S,{type:e.row.status===`running`?`success`:`info`},{default:n(()=>[u(r(e.row.status===`running`?`运行中`:`停机`),1)]),_:2},1032,[`type`])]),_:1}),l(y,{prop:`description`,label:`系统描述`,"min-width":`200`,"show-overflow-tooltip":``}),l(y,{prop:`createTime`,label:`创建时间`,width:`180`}),l(y,{label:`操作`,width:`200`,fixed:`right`},{default:n(e=>[l(v,{size:`small`,type:`primary`,onClick:t=>d.handleEdit(e.row)},{default:n(()=>[...a[10]||=[h(`i`,{class:`fa fa-edit`},null,-1),u(` 编辑 `,-1)]]),_:1},8,[`onClick`]),l(v,{size:`small`,type:`danger`,onClick:t=>d.handleDelete(e.row)},{default:n(()=>[...a[11]||=[h(`i`,{class:`fa fa-trash`},null,-1),u(` 删除 `,-1)]]),_:1},8,[`onClick`])]),_:1})]),_:1},8,[`data`])),[[N,d.loading]]),l(M,{modelValue:d.dialogVisible,"onUpdate:modelValue":a[7]||=e=>d.dialogVisible=e,title:d.dialogType===`add`?`新增系统`:`编辑系统`,width:`600px`},{footer:n(()=>[l(v,{onClick:a[6]||=e=>d.dialogVisible=!1},{default:n(()=>[...a[14]||=[u(`取消`,-1)]]),_:1}),l(v,{type:`primary`,onClick:d.handleSave},{default:n(()=>[...a[15]||=[u(`确定`,-1)]]),_:1},8,[`onClick`])]),default:n(()=>[l(j,{model:d.currentSystem,rules:d.rules,ref:`formRef`,"label-width":`100px`},{default:n(()=>[d.dialogType===`edit`?(_(),s(T,{key:0,label:`系统ID`},{default:n(()=>[l(w,{modelValue:d.currentSystem.systemId,"onUpdate:modelValue":a[0]||=e=>d.currentSystem.systemId=e,disabled:``},null,8,[`modelValue`])]),_:1})):c(``,!0),l(T,{label:`系统名称`,prop:`systemName`},{default:n(()=>[l(w,{modelValue:d.currentSystem.systemName,"onUpdate:modelValue":a[1]||=e=>d.currentSystem.systemName=e,placeholder:`请输入系统名称`},null,8,[`modelValue`])]),_:1}),l(T,{label:`系统类型`,prop:`systemType`},{default:n(()=>[l(D,{modelValue:d.currentSystem.systemType,"onUpdate:modelValue":a[2]||=e=>d.currentSystem.systemType=e,placeholder:`请选择系统类型`},{default:n(()=>[l(E,{label:`核心动力系统`,value:`核心动力系统`}),l(E,{label:`环境控制系统`,value:`环境控制系统`}),l(E,{label:`照明系统`,value:`照明系统`}),l(E,{label:`电梯扶梯系统`,value:`电梯扶梯系统`}),l(E,{label:`供水系统`,value:`供水系统`}),l(E,{label:`供电系统`,value:`供电系统`})]),_:1},8,[`modelValue`])]),_:1}),l(T,{label:`总功率(kW)`,prop:`totalPower`},{default:n(()=>[l(O,{modelValue:d.currentSystem.totalPower,"onUpdate:modelValue":a[3]||=e=>d.currentSystem.totalPower=e,min:0,precision:2,style:{width:`100%`}},null,8,[`modelValue`])]),_:1}),l(T,{label:`运行状态`,prop:`status`},{default:n(()=>[l(A,{modelValue:d.currentSystem.status,"onUpdate:modelValue":a[4]||=e=>d.currentSystem.status=e},{default:n(()=>[l(k,{label:`running`},{default:n(()=>[...a[12]||=[u(`运行中`,-1)]]),_:1}),l(k,{label:`stopped`},{default:n(()=>[...a[13]||=[u(`停机`,-1)]]),_:1})]),_:1},8,[`modelValue`])]),_:1}),l(T,{label:`系统描述`,prop:`description`},{default:n(()=>[l(w,{type:`textarea`,modelValue:d.currentSystem.description,"onUpdate:modelValue":a[5]||=e=>d.currentSystem.description=e,rows:3,placeholder:`请输入系统描述`},null,8,[`modelValue`])]),_:1})]),_:1},8,[`model`,`rules`])]),_:1},8,[`modelValue`,`title`])])}var C=m(y,[[`render`,S],[`__scopeId`,`data-v-de67738e`]]);export{C as default};